% -*- TeX-master: "sbml-level-3-version-1-core"; fill-column: 66 -*-
% $Id$
% $HeadURL$
% ----------------------------------------------------------------

% Helper macro for validation rules:
\newcommand{\sbmlrule}[1]{\item[#1.]\input{validation-rules/#1.tex}}

\section{Validation and Consistency checks for SBML}
\label{apdx:validation-rules}

The SBML specification is designed to allow modelers a high degree
of flexibility.  An SBML document that adheres to the specification 
will be considered valid, but if the modeler has chosen to only
partially declare optional attributes there may be inconsistencies
within the model, for example with units.  This section outlines a 
set of validation rules that must be followed to produce valid SBML 
and sets of consistency checks that can be applied to eliminate  
inconsistencies where this is desireable.

Note that since validation rule numbers remain unique, missing numbers
here merely indicate rules that applied in previous levels and
versions of SBML that no longer apply.

\subsection{Validation rules for SBML}

This section contains a summary of all the conditions that should
be true of a model, in addition to consistency with the XML
Schemas given in Appendixes~\ref{apdx:schema}
and~\ref{apdx:mathml-subset-schema}, for that model to be considered
valid SBML.


\subsubsection*{General XML validation} \begin{sbmlenum}

\sbmlrule{10101}
\sbmlrule{10102}
\sbmlrule{10103}

\end{sbmlenum} \subsubsection*{General MathML validation} \begin{sbmlenum}

\sbmlrule{10201}
\sbmlrule{10202}
\sbmlrule{10203}
\sbmlrule{10204}
\sbmlrule{10205}\question{10205 extended: avogadro csymbol added}
\sbmlrule{10206}
\sbmlrule{10207}
\sbmlrule{10208}
\sbmlrule{10209}
\sbmlrule{10210}\question{10210 extended: avogadro csymbol added}
\sbmlrule{10211}
\sbmlrule{10212}
\sbmlrule{10213}
\sbmlrule{10214}
\sbmlrule{10215}
\sbmlrule{10216}\question{10216 wording change: Parameter to LocalParameter}
\sbmlrule{10217}\question{10217 extended: avogadro csymbol added}
\sbmlrule{10218}
\sbmlrule{10219}



% [2006-03-30 MH] Not sure how to encode the following concept, so
% I'm leaving it out for now:
%   All other operators, values and symbols return numeric results.

\end{sbmlenum} \subsubsection*{General identifier validation}  \begin{sbmlenum}

\sbmlrule{10301}\question{10301 reduced: components removed}
\sbmlrule{10302}
\sbmlrule{10303}\question{10303 wording change: Parameter to LocalParameter}
\sbmlrule{10304}
\sbmlrule{10305}
\sbmlrule{10306}
\sbmlrule{10307}
\sbmlrule{10308}
\sbmlrule{10309}
\sbmlrule{10310}
\sbmlrule{10311}

\end{sbmlenum} \subsubsection*{General \token{annotation} validation} \begin{sbmlenum}

\sbmlrule{10401}
\sbmlrule{10402}

\end{sbmlenum} \subsubsection*{General model validation} \begin{sbmlenum}

\sbmlrule{10601}

\end{sbmlenum} \subsubsection*{General \token{notes} validation} \begin{sbmlenum}

\sbmlrule{10801}
\sbmlrule{10802}
\sbmlrule{10803}
\sbmlrule{10804}

\end{sbmlenum} \subsubsection*{SBML container validation} \begin{sbmlenum}

\sbmlrule{20101}
\sbmlrule{20102}
\sbmlrule{20103}
\sbmlrule{20104}\question{20104 - NEW}

\end{sbmlenum} \subsubsection*{\class{Model} validation} \begin{sbmlenum}

\sbmlrule{20201}
\sbmlrule{20203}\question{20203 reduced: components removed}
\sbmlrule{20204}

\end{sbmlenum} \subsubsection*{\class{FunctionDefinition} validation} \begin{sbmlenum}

\sbmlrule{20301}
\sbmlrule{20303}
\sbmlrule{20304}
\sbmlrule{20305}

\end{sbmlenum} \subsubsection*{\class{Unit} and \class{UnitDefinition} validation} \begin{sbmlenum}

\sbmlrule{20401}\question{20401 extended: avogadro added}
\sbmlrule{20410}
\sbmlrule{20413}\question{20413 - NEW}

%\end{sbmlenum} \subsubsection*{\class{Compartment} validation} \begin{sbmlenum}


\end{sbmlenum} \subsubsection*{\class{Species} validation} \begin{sbmlenum}

\sbmlrule{20601}
\sbmlrule{20609}
\sbmlrule{20610}
\sbmlrule{20611}
\sbmlrule{20614}
\sbmlrule{20617}\question{20617 - NEW}
\sbmlrule{20618}\question{20618 - NEW}

%\end{sbmlenum} \subsubsection*{\class{Parameter} validation} \begin{sbmlenum}


\end{sbmlenum} \subsubsection*{\class{InitialAssignment} validation} \begin{sbmlenum}

\sbmlrule{20801}\question{20801 extended: SpeciesReference added}
\sbmlrule{20802}
\sbmlrule{20803}

\end{sbmlenum} \subsubsection*{\class{AssignmentRule} and \class{RateRule} validation} \begin{sbmlenum}

\sbmlrule{20901}\question{20901 extended: SpeciesReference added}
\sbmlrule{20902}\question{20902 extended: SpeciesReference added}
\sbmlrule{20903}\question{20903 extended: SpeciesReference added}
\sbmlrule{20904}\question{20904 extended: SpeciesReference added}
\sbmlrule{20906}

\end{sbmlenum} \subsubsection*{\class{Constraint} validation} \begin{sbmlenum}

\sbmlrule{21001}
\sbmlrule{21004}
\sbmlrule{21005}
\sbmlrule{21006}

\end{sbmlenum} \subsubsection*{\class{Reaction} validation} \begin{sbmlenum}

\sbmlrule{21101}
\sbmlrule{21103}
\sbmlrule{21104}
\sbmlrule{21105}
\sbmlrule{21107}\question{21107 - NEW}

\end{sbmlenum} \subsubsection*{\class{SpeciesReference} and \class{ModifierSpeciesReference} validation} \begin{sbmlenum}

\sbmlrule{21111}

\end{sbmlenum} \subsubsection*{\class{KineticLaw} validation} \begin{sbmlenum}

\sbmlrule{21121}

\end{sbmlenum} \subsubsection*{\class{Event} validation} \begin{sbmlenum}

\sbmlrule{21201}
\sbmlrule{21202}
\sbmlrule{21206}
\sbmlrule{21207}\question{21207 - NEW}



\end{sbmlenum} \subsubsection*{\class{EventAssignment} validation} \begin{sbmlenum}

\sbmlrule{21211}\question{21211 extended: SpeciesReference added}
\sbmlrule{21212}\question{21212 extended: SpeciesReference added}


\end{sbmlenum} 

\subsection{Consistency checks for units within SBML}

Modelers can choose to ignore physical units completely 
within a model.  The following are a set of guidelines that,
if followed, will produce a model with consistent physical units.
The rules are divided into sections relating to either a component 
that has physical units or a component that contains a mathematical
formula that will produce a value that has physical units.

\subsubsection*{\class{Model} units} \begin{sbmlenum}

\sbmlrule{20205}\question{20205 - NEW}
\sbmlrule{20206}\question{20206 - NEW}
\sbmlrule{20207}\question{20207 - NEW}
\sbmlrule{20208}\question{20208 - NEW}
\sbmlrule{20209}\question{20209 - NEW}
\sbmlrule{20210}\question{20210 - NEW: Not sure if we decided not to restrict this}

\end{sbmlenum} \subsubsection*{\class{Compartment} units} \begin{sbmlenum}

\sbmlrule{20507}
\sbmlrule{20508}
\sbmlrule{20509}
\sbmlrule{20511}\question{20511 - NEW}
\sbmlrule{20512}\question{20512 - NEW}
\sbmlrule{20513}\question{20513 - NEW}

\end{sbmlenum} \subsubsection*{\class{Species} units} \begin{sbmlenum}

\sbmlrule{20608}\question{20608 extended: avogadro added}
\sbmlrule{20616}\question{20616 - NEW}

\end{sbmlenum} \subsubsection*{\class{Parameter} units} \begin{sbmlenum}

\sbmlrule{20701}
\sbmlrule{20702}\question{20702 - NEW}

\end{sbmlenum} \subsubsection*{\class{SpeciesReference} units} \begin{sbmlenum}

\sbmlrule{21114}\question{21114 - NEW}

\end{sbmlenum}\subsubsection*{General unit checks on math formula} \begin{sbmlenum}

\sbmlrule{10501}
\sbmlrule{10503}\question{10503 - NEW}

\end{sbmlenum} \subsubsection*{\class{AssignmentRule} derived units} \begin{sbmlenum}

\sbmlrule{10511}
\sbmlrule{10512}
\sbmlrule{10513}
\sbmlrule{10514}\question{10514 - NEW}

\end{sbmlenum} \subsubsection*{\class{InitialAssignment} derived units} \begin{sbmlenum}
\sbmlrule{10521}
\sbmlrule{10522}
\sbmlrule{10523}
\sbmlrule{10524}\question{10524 - NEW}

\end{sbmlenum} \subsubsection*{\class{RateRule} derived units} \begin{sbmlenum}
\sbmlrule{10531}
\sbmlrule{10532}
\sbmlrule{10533}
\sbmlrule{10534}\question{10534 - NEW}

\end{sbmlenum} \subsubsection*{\class{KineticLaw} derived units} \begin{sbmlenum}

\sbmlrule{10541}\question{10541 wording change: substance to extent}

\end{sbmlenum} \subsubsection*{\class{Event} derived units} \begin{sbmlenum}

\sbmlrule{10551}

\end{sbmlenum} \subsubsection*{\class{EventAssignment} derived units} \begin{sbmlenum}

\sbmlrule{10561}
\sbmlrule{10562}
\sbmlrule{10563}
\sbmlrule{10564}\question{10564 - NEW}

\end{sbmlenum}

\subsection{Consistency checks for SBOTerms within SBML}

Similar to units the \token{sboTerm} attribute is optional.  Following these
guidelines will produce a model that has accurate SBO identifiers.

\subsubsection*{General SBO checks)} \begin{sbmlenum}

\sbmlrule{10701}
\sbmlrule{10702}
\sbmlrule{10703}
\sbmlrule{10704}
\sbmlrule{10705}
\sbmlrule{10706}
\sbmlrule{10707}
\sbmlrule{10708}
\sbmlrule{10709}
\sbmlrule{10710}
\sbmlrule{10711}
\sbmlrule{10712}
\sbmlrule{10713}
\sbmlrule{10716}
\sbmlrule{10717}

\end{sbmlenum}