% -*- TeX-master: "sbml-level-3-version-1-core"; fill-column: 66 -*-
% $Id$
% $HeadURL$
% ----------------------------------------------------------------

% Helper macro for validation rules:

\newcommand{\vSymbol}{\textcolor{red}{$\Box\mkern-12mu\checkmark$}}
\newcommand{\vSymbolName}{checked box\xspace}
\newcommand{\cSymbol}{\textcolor{Goldenrod}{\scalefont{0.9}\ding{115}}}
\newcommand{\cSymbolName}{triangle\xspace}
\newcommand{\mSymbol}{\textcolor{Green}{$\bigstar$}}
\newcommand{\mSymbolName}{star\xspace}

\newcommand{\vsp}{\hspace*{1pt}}
\newcommand{\csp}{\hspace*{2pt}}
\newcommand{\msp}{\hspace*{1.1pt}}

\newcommand{\validationRule}     [1]{\item[#1. \vSymbol\vsp]\input{validation-rules/#1.tex}}
\newcommand{\consistencyRule}    [1]{\item[#1. \cSymbol\csp]\input{validation-rules/#1.tex}}
\newcommand{\modelingRule}       [1]{\item[#1. \mSymbol\msp]\input{validation-rules/#1.tex}}

\newcommand{\validationRuleNew}  [1]{\item[\underline{#1}. \vSymbol\vsp]\input{validation-rules/#1.tex}}
\newcommand{\consistencyRuleNew} [1]{\item[\underline{#1}. \cSymbol\csp]\input{validation-rules/#1.tex}}
\newcommand{\modelingRuleNew}    [1]{\item[\underline{#1}. \mSymbol\msp]\input{validation-rules/#1.tex}}

%
% The actual rules.
%

\section{Validation and consistency rules for SBML}
\label{apdx:validation-rules}

This section summarizes all the conditions that must (or in some
cases, at least \emph{should}) be true of a model encoded in
\sbmlthree Core format.  We use the following conventions in the
list of rules that follow:
\begin{itemize}

\item There are different degrees of rule strictness.  Formally,
  the differences are expressed in the statement of a rule: either
  a rule states that a condition \emph{must} be true, or a rule
  states that it \emph{should} be true.  Rules of the former kind
  are strict SBML validation rules---a model must conform to them.
  Rules of the latter kind are consistency rules.  To help
  highlight these differences, we use the following three symbols
  next to the rule numbers:
  \begin{description}

  \item[\hspace*{7.8pt}\vSymbol] A \vSymbolName indicates a
    \emph{requirement} for SBML conformance. If a model does not
    follow this rule, it does not conform to the SBML
    specification.  (Mnemonic intention behind the choice of
    symbol: ``This must be checked.'')

  \item[\hspace*{8.7pt}\cSymbol] A \cSymbolName indicates a
    \emph{recommendation} for model consistency.  If a model does
    not follow this rule, it is not considered strictly invalid as
    far as the SBML specification is concerned; however, it
    indicates that the model contains a physical or conceptual
    inconsistency.  (Mnemonic intention behind the choice of
    symbol: ``This is a cause for warning.'')

  \item[\hspace*{7.5pt}\mSymbol] A \mSymbolName indicates a strong
    recommendation for good modeling practice.  This rule is not
    strictly a matter of SBML encoding, but the recommendation
    comes from logical reasoning or experiences with SBML over the
    years.  As in the previous case, if a model does not follow
    this rule, it is not strictly considered an invalid SBML
    encoding.  (Mnemonic intention behind the choice of symbol:
    ``You're a star if you do this.'')

  \end{description}

\item Most rules have existed in previous Levels/Versions of SBML.
  Rules introduced in this \sbmlthree specification are indicated
  by an underlined rule number (e.g., \underline{10101} instead of
  10101).  Note that since each SBML specification is independent,
  the precise text of a given rule may differ slightly from its
  formulation in other Levels/Versions of SBML.

\item Rules that may have been introduced in lower Levels/Versions
  of SBML sometimes are removed in higher Levels/Versions.  (This
  can happen, for example, if they become irrelevant due to
  changes in the language in a higher Level or Version of SBML.)
  Rule numbers, however, remain unique and are never reused for a
  different purpose.  Consequently, there exist gaps in the
  sequence number of rules.

\end{itemize}


\subsubsection*{General rules concerning basic XML requirements} \begin{sbmlenum}

\validationRule{10101}
\validationRule{10102}
\validationRuleNew{10104}

\end{sbmlenum} \subsubsection*{General rules for MathML content in SBML} \begin{sbmlenum}

\validationRule{10201}
\validationRule{10202}
\validationRule{10203}
\validationRule{10204}
\validationRule{10205}
\validationRule{10206}
\validationRule{10207}
\validationRule{10208}
\validationRule{10209}
\validationRule{10210}
\validationRule{10211}
\validationRule{10212}
\validationRule{10213}
\validationRule{10214}
\validationRule{10215}\question{10215 should have SpeciesRef., yes?}
\validationRule{10216}
\validationRule{10217}
\validationRule{10218}
\validationRule{10219}
\validationRuleNew{10220}

\end{sbmlenum} \subsubsection*{General rules for identifiers}  \begin{sbmlenum}

\validationRule{10301}
\validationRule{10302}
\validationRule{10303}
\validationRule{10304}
\validationRule{10305}
\validationRule{10306}
\validationRule{10307}
\validationRule{10308}
\validationRule{10309}
\validationRule{10310}
\validationRule{10311}
\validationRuleNew{10312}\question{10312 SK is this enough?}

\end{sbmlenum} \subsubsection*{General rules for \token{annotation} elements} \begin{sbmlenum}

\validationRule{10401}
\validationRule{10402}
\validationRuleNew{10404}

\end{sbmlenum} \subsubsection*{General rules for units} \begin{sbmlenum}

\consistencyRule{10501}
\consistencyRuleNew{10503}
\consistencyRule{10511}
\consistencyRule{10512}
\consistencyRule{10513}
\consistencyRuleNew{10514}
\consistencyRule{10521}
\consistencyRule{10522}
\consistencyRule{10523}
\consistencyRuleNew{10524}
\consistencyRule{10531}
\consistencyRule{10532}
\consistencyRule{10533}
\consistencyRule{10534}
\consistencyRule{10541}
\consistencyRuleNew{10542}
\consistencyRule{10551}
\consistencyRule{10561}
\consistencyRule{10562}
\consistencyRule{10563}
\consistencyRuleNew{10564}

\end{sbmlenum} \subsubsection*{General rules for model definitions} \begin{sbmlenum}

\validationRule{10601}

\end{sbmlenum} \subsubsection*{General rules for SBO usage} \begin{sbmlenum}

\consistencyRule{10701}
\consistencyRule{10702}
\consistencyRule{10703}
\consistencyRule{10704}
\consistencyRule{10705}
\consistencyRule{10706}
\consistencyRule{10707}
\consistencyRule{10708}
\consistencyRule{10709}
\consistencyRule{10710}
\consistencyRule{10711}
\consistencyRule{10712}
\consistencyRule{10713}
\consistencyRule{10716}
\consistencyRule{10717}

\end{sbmlenum} \subsubsection*{General rules for \token{notes} elements} \begin{sbmlenum}

\validationRule{10801}
\validationRule{10802}
\validationRule{10803}
\validationRuleNew{10805}

\end{sbmlenum} \subsubsection*{General rules for the \token{<sbml>} container element} \begin{sbmlenum}

\validationRule{20101}
\validationRule{20102}
\validationRule{20103}
\validationRuleNew{20104}
\validationRuleNew{20105}\question{20105 added SK}
\validationRuleNew{20106}\question{20106 added SK}
\validationRuleNew{20107}\question{20107 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{Model} components} \begin{sbmlenum}

\validationRule{20201}
\validationRule{20203}
\validationRule{20204}
\validationRuleNew{20205}
\modelingRuleNew{20206}
\modelingRuleNew{20207}
\modelingRuleNew{20208}
\modelingRuleNew{20209}
\modelingRuleNew{20210}

\end{sbmlenum} \subsubsection*{Rules for \class{FunctionDefinition} components} \begin{sbmlenum}

\validationRule{20301}
\validationRule{20303}
\validationRule{20304}\question{20304 added avogadro}
\validationRule{20305}
\validationRuleNew{20306}

\end{sbmlenum} \subsubsection*{Rules for \class{Unit} and \class{UnitDefinition} components} \begin{sbmlenum}

\validationRule{20401}
\validationRule{20410}
\validationRuleNew{20413}
\validationRuleNew{20414}
\validationRuleNew{20415}\question{20415 added SK}
\validationRuleNew{20416}\question{20416 added SK}
\validationRuleNew{20417}\question{20417 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{Compartment} components} \begin{sbmlenum}

\modelingRule{20507}
\modelingRule{20508}
\modelingRule{20509}
\modelingRuleNew{20511}
\modelingRuleNew{20512}
\modelingRuleNew{20513}
\validationRuleNew{20514}\question{20514 added SK}
\validationRuleNew{20515}\question{20515 added SK}
\validationRuleNew{20516}\question{20516 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{Species} components} \begin{sbmlenum}

\validationRule{20601}
\modelingRule{20608}
\validationRule{20609}
\validationRule{20610}
\validationRule{20611}
\validationRule{20614}
\modelingRuleNew{20616}
\validationRuleNew{20617}
\validationRuleNew{20618}
\validationRuleNew{20619}\question{20619 added SK}
\validationRuleNew{20620}\question{20620 added SK}
\validationRuleNew{20621}\question{20621 added SK}
\validationRuleNew{20622}\question{20622 added SK}
\validationRuleNew{20623}\question{20623 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{Parameter} components} \begin{sbmlenum}

\modelingRule{20701}
\modelingRuleNew{20702}
\validationRuleNew{20703}\question{20703 added SK}
\validationRuleNew{20704}\question{20704 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{InitialAssignment} components} \begin{sbmlenum}

\validationRule{20801}
\validationRule{20802}
\validationRule{20803}
\validationRuleNew{20804}

\end{sbmlenum} \subsubsection*{Rules for \class{AssignmentRule} and \class{RateRule} components} \begin{sbmlenum}

\validationRule{20901}
\validationRule{20902}
\validationRule{20903}
\validationRule{20904}
\validationRule{20906}
\validationRuleNew{20907}

\end{sbmlenum} \subsubsection*{Rules for \class{Constraint} components} \begin{sbmlenum}

\validationRule{21001}
\validationRule{21004}
\validationRule{21005}
\validationRuleNew{21007}
\validationRuleNew{21008}

\end{sbmlenum} \subsubsection*{Rules for \class{Reaction} components} \begin{sbmlenum}

\validationRule{21101}
\validationRule{21103}
\validationRule{21104}
\validationRule{21105}
\validationRuleNew{21106}
\validationRuleNew{21107}
\validationRuleNew{21108}\question{21108 added SK}
\validationRuleNew{21109}\question{21109 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{SpeciesReference} and \class{ModifierSpeciesReference} components} \begin{sbmlenum}

\validationRule{21111}
\modelingRuleNew{21114}
\validationRuleNew{21115}\question{21115 added SK}
\validationRuleNew{21116}\question{21116 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{KineticLaw} components} \begin{sbmlenum}

\validationRule{21121}
\validationRule{21123}
\validationRuleNew{21127}
\validationRuleNew{21128}
\validationRuleNew{21129}\question{21129 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{Event} components} \begin{sbmlenum}

\validationRule{21201}
\validationRule{21202}
\validationRule{21203}
\validationRule{21206}
\validationRuleNew{21207}
\validationRuleNew{21208}
\validationRuleNew{21209}
\validationRuleNew{21210}
\validationRuleNew{21221}\question{21221 added SK}

\end{sbmlenum} \subsubsection*{Rules for \class{EventAssignment} components} \begin{sbmlenum}

\validationRule{21211}
\validationRule{21212}
\validationRuleNew{21213}

\end{sbmlenum}
