<?xml version="1.0" encoding="UTF-8"?>
<sbml xmlns="http://www.sbml.org/sbml/level3/version1/core" level="3" version="1"
      xmlns:comp="http://www.sbml.org/sbml/level3/version1/comp/version1"
      comp:required="true">

<listOfModelDefinitions>
  <modelDefinition id="simple" name="simple">
    <listOfCompartments>
      <compartment id="comp" size="1" constant="true" spatialDimensions="3" portid="comp"/>
    </listOfCompartments>
    <listOfSpecies>
      <species id="S" compartment="comp" initialConcentration="5" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false" portid="S_port"/>
      <species id="D" compartment="comp" initialConcentration="10" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false" portid="D_port"/>
    </listOfSpecies>
    <listOfReactions>
      <reaction id="J0" reversible="true" fast="false" portid="J0_port">
        <listOfReactants>
          <speciesReference species="S" stoichiometry="1" constant="false"/>
        </listOfReactants>
        <listOfProducts>
          <speciesReference species="D" stoichiometry="1" constant="false"/>
        </listOfProducts>
      </reaction>
    </listOfReactions>
  </modelDefinition>
  <modelDefinition id="enzyme" name="enzyme">
    <listOfCompartments>
      <compartment id="comp" size="1" constant="true" spatialDimensions="3" portid="comp_port"/>
    </listOfCompartments>
    <listOfSpecies>
      <species id="S" compartment="comp" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false" portid="S_port"/>
      <species id="E" compartment="comp" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false" portid="E_port"/>
      <species id="D" compartment="comp" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false" portid="D_port"/>
      <species id="ES" compartment="comp" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false" portid="ES_port"/>
    </listOfSpecies>
    <listOfReactions>
      <reaction id="J0" reversible="true" fast="false" portid="J0_port">
        <listOfReactants>
          <speciesReference species="S" stoichiometry="1" constant="false"/>
          <speciesReference species="E" stoichiometry="1" constant="false"/>
        </listOfReactants>
        <listOfProducts>
          <speciesReference species="ES" stoichiometry="1" constant="false"/>
        </listOfProducts>
      </reaction>
      <reaction id="J1" reversible="true" fast="false" portid="J1_port">
        <listOfReactants>
          <speciesReference species="ES" stoichiometry="1" constant="false"/>
        </listOfReactants>
        <listOfProducts>
          <speciesReference species="D" stoichiometry="1" constant="false"/>
          <speciesReference species="E" stoichiometry="1" constant="false"/>
        </listOfProducts>
      </reaction>
    </listOfReactions>
  </modelDefinition>
  </listOfModelDefinitions>

  <model id="complexified">
    <listOfSubmodels>
       <submodel id="simple">
         <modelRef model="simple" />
         <listOfDeletions>
           <deletion id="oldrxn" port="J0_port" />
         </listOfDeletions>
       </submodel>
       <submodel id="enzyme">
         <modelRef model="enzyme" />
       </submodel>
    </listOfSubmodels>
    <listOfReactions>
      <reaction id="J0" reversible="true" fast="false">
        <replaces>
          <subelement submodel="simple" deletion="oldrxn" />
          <subelement submodel="enzyme" port="J0_port" identical="true" />
        </replaces>
        <listOfReactants>
          <speciesReference species="S" stoichiometry="1" constant="false"/>
          <speciesReference species="E" stoichiometry="1" constant="false"/>
        </listOfReactants>
        <listOfProducts>
          <speciesReference species="ES" stoichiometry="1" constant="false"/>
        </listOfProducts>
      </reaction>
      <reaction id="J1" reversible="true" fast="false">
        <replaces>
          <subelement submodel="simple" deletion="oldrxn" />
          <subelement submodel="enzyme" port="J1_port" identical="true" />
        </replaces>
        <listOfReactants>
          <speciesReference species="ES" stoichiometry="1" constant="false"/>
        </listOfReactants>
        <listOfProducts>
          <speciesReference species="D" stoichiometry="1" constant="false"/>
        </listOfProducts>
      </reaction>
    </listOfReactions>
    <listOfCompartments>
      <compartment id="comp" size="1" constant="true" spatialDimensions="3">
        <replaces>
          <subelement submodel="simple" port="comp_port" identical="true" />
          <subelement submodel="enzyme" port="comp_port" identical="true" />
        </replaces>
      </compartment>
    </listOfCompartments>
    <listOfSpecies>
      <species id="S" compartment="comp" initialConcentration="5" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false">
        <replaces>
          <subelement submodel="simple" port="S_port" identical="true" />
          <subelement submodel="enzyme" port="S_port" identical="false" />
        </replaces>
      </species>
      <species id="D" compartment="comp" initialConcentration="10" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false">
        <replaces>
          <subelement submodel="simple" port="D_port" identical="true" />
          <subelement submodel="enzyme" port="D_port" identical="false" />
        </replaces>
      </species>
      <species id="E" compartment="comp" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false">
        <replaces>
          <subelement submodel="simple" deletion="oldrxn" />
          <subelement submodel="enzyme" port="E_port" identical="true" />
        </replaces>
      </species>
      <species id="ES" compartment="comp" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false">
        <replaces>
          <subelement submodel="simple" deletion="oldrxn" />
          <subelement submodel="enzyme" port="ES_port" identical="true" />
        </replaces>
      </species>
    </listOfSpecies>
  </model>

</sbml>
