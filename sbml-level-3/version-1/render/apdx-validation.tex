% -*- TeX-master: "main"; fill-column: 72 -*-
\section{Validation of SBML documents} \label{apdx-validation}

\subsection{Validation and consistency rules} \label{validation-rules}

This section summarizes all the conditions that must (or in some cases,
at least \emph{should}) be true of an SBML Level~3 Version~1 model that
uses the \RenderPackage. We use the same conventions as are used in the
SBML Level~3 Version~1 Core specification document. In particular, there
are different degrees of rule strictness. Formally, the differences are
expressed in the statement of a rule: either a rule states that a
condition \emph{must} be true, or a rule states that it \emph{should} be
true. Rules of the former kind are strict SBML validation rules---a
model encoded in SBML must conform to all of them in order to be
considered valid. Rules of the latter kind are consistency rules. To
help highlight these differences, we use the following three symbols
next to the rule numbers:

\begin{description}

\item[\hspace*{6.5pt}\vSymbol\vsp] A \vSymbolName indicates a
\emph{requirement} for SBML conformance. If a model does not follow this
rule, it does not conform to the Renderingspecification.
(Mnemonic intention behind the choice of symbol: ``This must be
checked.'')

\item[\hspace*{6.5pt}\cSymbol\csp] A \cSymbolName indicates a
\emph{recommendation} for model consistency. If a model does not follow
this rule, it is not considered strictly invalid as far as the Flux
Balance Constraints specification is concerned; however, it indicates
that the model contains a physical or conceptual inconsistency.
(Mnemonic intention behind the choice of symbol: ``This is a cause for
warning.'')

\item[\hspace*{6.5pt}\mSymbol\msp] A \mSymbolName indicates a strong
recommendation for good modeling practice. This rule is not strictly a
matter of SBML encoding, but the recommendation comes from logical
reasoning. As in the previous case, if a model does not follow this
rule, it is not strictly considered an invalid SBML encoding. (Mnemonic
intention behind the choice of symbol: ``You're a star if you heed
this.'')

\end{description}

The validation rules listed in the following subsections are all stated
or implied in the rest of this specification document. They are
enumerated here for convenience. Unless explicitly stated, all
validation rules concern objects and attributes specifically defined in
the Renderingpackage.

For \notice convenience and brevity, we use the shorthand
``\token{render:\-x}'' to stand for an attribute or element name \token{x}
in the namespace for the \RenderPackage, using the namespace prefix
\token{render}. In reality, the prefix string may be different from the
literal ``\token{render}'' used here (and indeed, it can be any valid XML
namespace prefix that the modeler or software chooses). We use
``\token{render:\-x}'' because it is shorter than to write a full
explanation everywhere we refer to an attribute or element in the
\RenderPackage namespace.

\subsubsection*{General rules about this package}

\validRule{render-10101}{To conform to the \RenderPackage specification for
SBML Level~3 Version~1, an SBML document must declare the use of the
following XML Namespace:\\
\textsl[-25]{\uri{http://www.sbml.org/sbml/level3/version1/render/version1}
}. (References: SBML Level~3 Package Specification for Rendering, Version~1, \sec{xml-namespace}.)}

\validRule{render-10102}{Wherever they appear in an SBML document, elements
and attributes from the \RenderPackage must be declared either implicitly
or explicitly to be in the XML namespace
\uri{http://www.sbml.org/sbml/level3/version1/render/version1}.
(References: SBML Level~3 Package Specification for Rendering, Version~1, \sec{xml-namespace}.) }

\subsubsection*{General rules about identifiers}

\validRule{render-10301}{(Extends validation rule \#10301 in the SBML
Level~3 Version~1 Core specification.) Within a \Model the values of the
attributes \token{id} and \token{render:\-id} on every instance of the
following classes of objects must be unique across the set of all
\token{id} and \token{render:\-id} attribute values of all such objects in
a model: the \Model itself, plus all contained \FunctionDefinition,
\Compartment, \Species, \Reaction, \SpeciesReference,
\ModifierSpeciesReference, \Event, and \Parameter objects, plus the
objects defined by the
\RenderPackage. (References: SBML Level~3 Package Specification for Rendering, Version~1, \sec{primtypes}.) }

\validRule{render-10302} {
The value of a \token{render:\-id} attribute must always conform to the
syntax of the SBML data type \primtype{SId}. (References: SBML Level~3
Package Specification for Rendering, Version~1,
\sec{primtypes}.)
}

\subsubsection*{Rules for the extended \class{SBML} class}


\input{apdx-validation-rules}