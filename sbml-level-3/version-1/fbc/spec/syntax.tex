% -*- TeX-master: "main"; fill-column: 72 -*-

\section{Proposed syntax and semantics}
\label{syntax}

In this section, we define the syntax and semantics of the Flux Balance
Constraints package for SBML Level~3 Version~1.  We expound on the various
data types and constructs defined in this package, then in \sect{examples},
we provide complete examples of using the constructs in example SBML
models.

% -----------------------------------------------------------------------------
\subsection{Namespace URI and other declarations necessary for using this package}
\label{xml-namespace}

Every SBML Level~3 package is identified uniquely by an XML namespace URI.
For an SBML document to be able to use a given SBML Level~3 package, it
must declare the use of that package by referencing its URI.  The following
is the namespace URI for this version of the Flux Balance Constraints
package for SBML Level~3 Version~1:
\begin{center}
\uri{http://www.sbml.org/sbml/level3/version1/fbc/version1}
\end{center}

In addition, SBML documents using a given package must indicate whether
understanding the package is required for complete mathematical
interpretation of a model, or whether the package is optional.  This is
done using the attribute \token{required} on the \token{<sbml>} element in
the SBML document.  For the Flux Balance Constraints package, the value of
this attribute must be set to \val{true}.

The following fragment illustrates the beginning of a typical SBML model
using SBML Level~3 Version~1 and this version of the Flux Balance
Constraints package:

\begin{example}
<?xml version="1.0" encoding="UTF-8"?>
<sbml xmlns="http://www.sbml.org/sbml/level3/version1/core" level="3" version="1"
      xmlns:fbc="http://www.sbml.org/sbml/level3/version1/fbc/version1" fbc:required="true">
\end{example}

\begin{figure}[h]
  \centering
  % Requires \usepackage{graphicx}
  \includegraphics[width=\textwidth]{images/fbc_uml.pdf}\\
  \caption{A UML representation of the Flux Balance Constraints package classes. See \ref{conventions}} for conventions related to this figure. \label{fig:fbc_uml}
\end{figure}

\subsection{Primitive data types}
Section~3.1 of the \sbmlthreecore specification defines a number of
primitive data types and also uses a number of XML Schema 1.0 data
types~\citep{biron:2000}.  More specifically we make use of \primtype{integer}, \primtype{double}, \primtype{string}, \primtype{SIdRef} and \primtype{enum}. In addition we make use of two new primitives \primtype{FbcSId} and \primtype{FbcSIdRef}, see \ref{fig:fbc_uml} for the interrelation between these entities.

\subsubsection{Type \primtypeNC{FbcSId}}
\label{primtype-fbcsid}

The type \primtype{FbcSId} is derived from \primtype{SId} (\sbmlthreecore specification Section~3.1.7) and has identical syntax. The \primtype{FbcSId} type is used as the data type for the identifiers of \FluxBound (\ref{fluxbound-class}) and \Objective (\ref{objective-class}) classes. By using a separate identifier type we differentiate them from others defined in the \SBML model and thus ensuring data encapsulation. In addition the \Objective class \primtype{FbcSId} provides an identifier to the \Objective which is set as active. The equality of \primtype{FbcSId} values is determined by an exact character sequence match and therefore comparisons of these identifiers must be performed in a case-sensitive manner.

\subsubsection{Type \primtypeNC{FbcSIdRef}}
\label{primtype-fbcsidref}

Type \primtype{FbcSIdRef} is used for all attributes that refer to
identifiers of type \primtype{FbcSId}.  This type is derived from
\primtype{FbcSId} with the restriction that the value of an
attribute having type \primtype{FbcSIdRef} must match the value of a
\primtype{FbcSId} attribute in the current model. In the FBC package the \ListOfObjectives has an attribute of this type that is used to refer to an instance of the \Objective class.

\subsection{The extended \class{Model} class}
\label{sbml-model}
\label{listoffluxbounds-class}
\label{listofobjectives-class}


\subsection{The extended \class{Species} class}
\label{sbml-species}
\label{species-class}


\subsection{The \class{FluxBound} class}
\label{fluxbound-class}


\subsection{The \class{Objective} class}
\label{objective-class}
\label{listoffluxobjectives-class}


\subsection{The \class{FluxObjective} class}
\label{fluxobjective-class}


