% -*- TeX-master: "main"; fill-column: 72 -*-

\section{Best practices}
\label{best-practices}

In this section, we recommend a number of practices for using and
interpreting various constructs in the \FBCPackage.
These recommendations are non-normative, but we advocate them strongly;
ignoring them will not render a model invalid, but may reduce
inter-operability between software and models.

\subsection{Examples contrasting the current \SBML L2 encoding with L3 and \FBC}
These examples contrast some elements of an existing model, iJR904 from the \textsf{BiGG} Database encoded in the \textsf{COBRA} format \cite{ijr904, bigg, cobra} that have been translated into SBML Level~3 Version~1 using the \textsf{CBMPy} implementation of the \FBC package \cite{pysces, cbmpy} and \textsf{libSBML} experimental ver.~5.6.0 \cite{libsbml}.

\subsubsection*{Objective function definition}
\paragraph{Old style \SBML Level 2 objective}
\exampleFile{examples/ex_objf_bigg.txt}

\paragraph{New \SBML Level 3 style objective}
\protect\exampleFile{examples/ex_objf_l3.txt}

\newpage
\subsubsection*{Species definition}
It is particularly useful to contrast the differences in the \Species definition as it is used in genome scale models.

\paragraph{Classic \SBML Level 2 \Species annotation}
To begin with we let's examine the \SBML Level~2 Version~1 species definition used by the BiGG database and \textsf{COBRA} \cite{bigg, cobra}. Note how the \token{name} attribute is overloaded with the chemical formula.
%
\exampleFile{examples/ex_spec_bigg.txt}

\paragraph{An alternate \SBML Level 2 \Species annotation}
A newer variation of the above, probably necessitated by the discontinuation of the \token{charge} attribute in \SBML and \textsf{libSBML}
%
\exampleFile{examples/ex_spec_cobra.txt}

\paragraph{New \SBML Level 3 \Species attributes}
Hopefully, with the adoption of \SBML \FBC these species properties can be unified into a common format.
%
\exampleFile{examples/ex_spec_l3.txt}



\newpage
\subsubsection*{Reaction definition and flux bounds}
\paragraph{Old \SBML Level 2 style reaction}
\exampleFile{examples/ex_reaction_bigg.txt}
\newpage
\paragraph{New \SBML Level 3 style reaction and flux bound}
Please note that in order to maintain all the annotation encoded in the \SBML Level 2 \Reaction \token{notes} an additional (custom) annotation is introduced: ``KeyValueData''. \footnote{More information about this annotation is available at \url{http://pysces.sourceforge.net/KeyValueData} \cite{cbmpy}}

If implemented, this should be considered a transitional step until a generally accepted annotation system is adopted by the constraint based modelling community. Nevertheless, as an example and where (unambiguously) possible, the \SBML Level 2 annotation has been converted into its MIRIAM compliant form, in this case the \textit{EC number}.
\exampleFile{examples/ex_reaction_l3.txt}
\exampleFile{examples/ex_fb_l3.txt}

