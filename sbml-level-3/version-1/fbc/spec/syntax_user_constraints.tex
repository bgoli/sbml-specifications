% -*- TeX-master: "main"; fill-column: 72 -*-

\newpage
\section{HARMONY scratchpad: extensions proposed for FBC V3}

\begin{quote}
 \textbf{\Large The contents of this section are unofficial and are formatted here to make efficient use of time at HARMONY 2018}
\end{quote}

\subsection{The extended \class{Model} class}
\label{model-class-kv}
%\label{listoffluxbounds-class}




The \SBML \Model class is extended by \token{listOfAdditionalConstraints} of which it may contain at most one.

\begin{figure}[ht]
  \centering
  % Requires \usepackage{graphicx}
  %\includegraphics[width=6cm]{images/v3harmony_fbc_model.pdf}\\
  \caption{A UML representation of the extended \SBML \Model class used in
  the \FBCPackage. See \ref{conventions} for conventions related to this
  figure.}
  \label{fig:fbc_uml_model_new}
\end{figure}

\subsubsection{Type \primtypeNC{FbcFluxObjectiveVariableType}}
\label{primtype-fbcfluxobjectivevariabletype}

The \FBCPackage defines a new enumerated type \primtype{FbcFluxObjectiveVariableType} which
represents the index of a variable that occurs in the objective function. It can have one
of the following two values \val{linear} or \val{quadratic}.

\subsubsection{Type \primtypeNC{FbcUserConstraintVariableType}}
\label{primtype-fbcuserconstraintvariabletype}

The \FBCPackage defines a new enumerated type \primtype{FbcUserConstraintVariableType} which
represents the index of a variable that occurs in a user defined constraint. It can have one
of the following two values \val{linear} or \val{quadratic}.

\subsection{The \FBC \class{FluxObjective} class}
\paragraph{The \token{variableType} attribute}
The required \token{variableType} attribute contains a \primtype{FbcObjectiveVariableType} that
represents the index of a variable that occurs in a \FluxObjective. It can have one
of the following two values \val{linear} or \val{quadratic}.

\subsubsection{The \FBC \class{listOfUserConstraints}}
\label{listofuserconstraints-class}
As shown in \ref{fig:fbc_uml} the \ListOfUserConstraints is derived from \SBase
and inherits the attributes \token{metaid} and \token{sboTerm}, as well as
the subcomponents for \Annotation and \Notes. The
\ListOfUserConstraints must contain at least one \UserConstraint (defined in
\ref{userconstraint-class}).

\subsection{The \FBC \class{UserConstraint} class}
\label{userconstraint-class}
\label{listoftuples-class}

The \FBC \UserConstraint class is derived from \SBML \SBase and inherits
\token{metaid} and \token{sboTerm}, as well as the subcomponents for
\Annotation and \Notes. It's purpose is to define non-stoichiometric constraints, i.e., constraints that are not implicitly defined by the reaction network. The \UserConstraint contains a linear combination of \UserConstraintComponent's contained in a \ListOfUserConstraintComponents.

\paragraph{The \token{id} and \token{name} attributes}
An \Objective has an optional \token{id} of type
\primtype{SId} and an optional attribute \token{name} of type \primtype{string}.

\paragraph{The \token{leftHandSide} attribute}
The required \token{leftHandSide} attribute contains an \primtype{SIdRef} that references a \Parameter which contains the lower boundary value of the \UserConstraint.

\paragraph{The \token{rightHandSide} attribute}
The required \token{rightHandSide} attribute contains an \primtype{SIdRef} that references a \Parameter which contains the upper boundary value of the \UserConstraint.

\paragraph{The \token{listOfUserConstraintComponents} element}
The element \token{listOfUserConstraintComponents} which contains a
\ListOfUserConstraintComponents is derived from and functions like a typical \SBML
\textsf{\textbf{ListOf\rule{0.15in}{0.5pt}}} class with the restriction that it
must contain one or more elements of type \UserConstraintComponent (see \ref{userconstraintcomponent-class}).
This implies that if a \UserConstraint is defined there should be at least
one \UserConstraintComponent contained in a \ListOfUserConstraintComponents.

\begin{figure}[ht]
  \centering
  % Requires \usepackage{graphicx}
  %\includegraphics[width=5cm]{images/v2harmony_fbc_objective.pdf}\\
  \caption{A UML representation of the \FBCPackage \UserConstraint class. For a complete description see \ref{fig:fbc_uml} as well as \ref{conventions} for conventions related to this figure.}
  \label{fig:fbc_uml_userconstraint}
\end{figure}

\subsection{The \FBC \class{UserConstraintComponent} class}
\label{userconstraintcomponent-class}

The \FBC \UserConstraintComponent class is derived from \SBML \SBase and inherits
\token{metaid} and \token{sboTerm}, as well as the subcomponents for
\Annotation and \Notes. The \UserConstraintComponent class is a relatively simple container for a variable type specifier, a variable and a weighted by a signed linear coefficient.

\paragraph{The \token{id} and \token{name} attributes}
An \Objective has an optional \token{id} of type
\primtype{SId} and an optional attribute \token{name} of type \primtype{string}.

\paragraph{The \token{coefficient} attribute}
The required \token{coefficient} attribute contains an \primtype{SIdRef} that is restricted to reference only a \Parameter which holds the coefficient value.

\paragraph{The \token{variable} attribute}
The required \token{variable} attribute contains an \primtype{SIdRef} that is restricted to reference either a \Reaction or \Parameter identifier.

\paragraph{The \token{variableType} attribute}
The required \token{variableType} attribute contains a \primtype{FbcUserConstraintVariableType} that indicates whether a variable should be considered as `linear' or `quadratic'.

