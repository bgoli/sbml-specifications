% -*- TeX-master: "sbml-level-3-version-2-core"; fill-column: 66 -*-
% ----------------------------------------------------------------

% Helper macro for validation rules:

\newcommand{\vSymbol}{\textcolor{red}{$\Box\mkern-12mu\checkmark$}}
\newcommand{\vSymbolName}{checked box\xspace}
\newcommand{\cSymbol}{\textcolor{Goldenrod}{\scalefont{0.9}\ding{115}}}
\newcommand{\cSymbolName}{triangle\xspace}
\newcommand{\mSymbol}{\textcolor{Green}{$\bigstar$}}
\newcommand{\mSymbolName}{star\xspace}

\newcommand{\vsp}{\hspace*{1pt}}
\newcommand{\csp}{\hspace*{2pt}}
\newcommand{\msp}{\hspace*{1.1pt}}

\newcommand{\validationRule}     [1]{\item[#1. \vSymbol\vsp]\input{validation-rules/#1.tex}}
\newcommand{\consistencyRule}    [1]{\item[#1. \cSymbol\csp]\input{validation-rules/#1.tex}}
\newcommand{\modelingRule}       [1]{\item[#1. \mSymbol\msp]\input{validation-rules/#1.tex}}

\newcommand{\validationRuleNew}  [1]{\item[\underline{#1}. \vSymbol\vsp]\input{validation-rules/#1.tex}}
\newcommand{\consistencyRuleNew} [1]{\item[\underline{#1}. \cSymbol\csp]\input{validation-rules/#1.tex}}
\newcommand{\modelingRuleNew}    [1]{\item[\underline{#1}. \mSymbol\msp]\input{validation-rules/#1.tex}}


\ifveronespec
  \newcommand{\validationRuleVerTwo}  [1]{}
  \newcommand{\consistencyRuleVerTwo} [1]{}
  \newcommand{\modelingRuleVerTwo}    [1]{}

  \newcommand{\removedRule}           [2]{#1 #2}
  \newcommand{\tworefs}               [2]{SBML L3V1 #2}
\else
  \newcommand{\validationRuleVerTwo}  [1]{\item[\underline{#1}. \vSymbol\vsp]\input{validation-rules/#1.tex}}
  \newcommand{\consistencyRuleVerTwo} [1]{\item[\underline{#1}. \cSymbol\csp]\input{validation-rules/#1.tex}}
  \newcommand{\modelingRuleVerTwo}    [1]{\item[\underline{#1}. \mSymbol\msp]\input{validation-rules/#1.tex}}

  \newcommand{\removedRule}           [2] {(This validation rule does not apply in SBML \thisLV.)
                                          \footnote{Original rule:  ``{#1}''}}
  \newcommand{\tworefs}               [2]{SBML L3V1 Section #1; SBML L3V2 #2}
\fi

%
% The actual rules.
%

\section{Validation and consistency rules for SBML}
\label{apdx:validation-rules}

This section summarizes all the conditions that must (or in some
cases, at least \emph{should}) be true of a model encoded in
\sbmlthree Core format.  We use the following conventions in the
list of rules that follow:
\begin{itemize}

\item There are different degrees of rule strictness.  Formally,
  the differences are expressed in the statement of a rule: either
  a rule states that a condition \emph{must} be true, or a rule
  states that it \emph{should} be true.  Rules of the former kind
  are strict SBML validation rules---a model encoded in SBML must
  conform to all of them in order to be considered valid.  Rules
  of the latter kind are consistency rules.  To help highlight
  these differences, we use the following three symbols next to
  the rule numbers:
  \begin{description}

  \item[\hspace*{7.8pt}\vSymbol] A \vSymbolName indicates a
    \emph{requirement} for SBML conformance. If a model does not
    follow this rule, it does not conform to the SBML
    specification.  (Mnemonic intention behind the choice of
    symbol: ``This must be checked.'')

  \item[\hspace*{8.7pt}\cSymbol] A \cSymbolName indicates a
    \emph{recommendation} for model consistency.  If a model does
    not follow this rule, it is not considered strictly invalid as
    far as the SBML specification is concerned; however, it
    indicates that the model contains a physical or conceptual
    inconsistency.  (Mnemonic intention behind the choice of
    symbol: ``This is a cause for warning.'')

  \item[\hspace*{7.5pt}\mSymbol] A \mSymbolName indicates a strong
    recommendation for good modeling practice.  This rule is not
    strictly a matter of SBML encoding, but the recommendation
    comes from logical reasoning.  As in the previous case, if a
    model does not follow this rule, it is not strictly considered
    an invalid SBML encoding.  (Mnemonic intention behind the
    choice of symbol: ``You're a star if you heed this.'')

  \end{description}

\item Most rules have existed in previous Levels/Versions of SBML.
  Note that, because each SBML specification is independent, the
  precise details of a given rule in \emph{this} specification may
  differ slightly from its formulation in other Levels/Versions,
  to reflect changes in \sbmlthree; however, the essential purpose
  of the rule will be the same.

\item Rules that may have been introduced in lower Levels/Versions
  of SBML sometimes are removed in higher Levels/Versions.  (This
  can happen, for example, if they become irrelevant due to
  changes in the language in a higher Level or Version of SBML.)
  Rule numbers, however, remain unique and are never reused for a
  different purpose.  Consequently, there exist gaps in the
  sequence numbers of the rules.

\item New rules introduced by this \sbmlthree specification are
  indicated by an underlined rule number (e.g., \underline{10104}
  instead of 10104).

\item \changed{Attributes listed in these rules have no namespace prefix, and must appear in SBML documents without any explicit namespace, even if the namespace is otherwise correct for \sbmlthree.}

\end{itemize}


\subsubsection*{General rules concerning basic XML requirements} \begin{sbmlenum}

\validationRule{10101}
\validationRule{10102}
\validationRule{10104}

\end{sbmlenum} \subsubsection*{General rules for MathML content in SBML} \begin{sbmlenum}

\validationRule{10201}
\validationRule{10202}
\validationRule{10203}
\validationRule{10204}
\validationRule{10205}
\validationRule{10206}
\validationRule{10207}
\validationRule{10208}
\validationRule{10209}
\validationRule{10210}
\validationRule{10211}
\consistencyRule{10212}
\validationRule{10213}
\validationRule{10214}
\validationRule{10215}
\validationRule{10216}
\validationRule{10217}
\validationRule{10218}
\validationRule{10219}
\validationRule{10220}
\validationRule{10221}

\validationRuleVerTwo{10223}
\validationRuleVerTwo{10224}
\validationRuleVerTwo{10225}

\end{sbmlenum} \subsubsection*{General rules for identifiers}  \begin{sbmlenum}

\validationRule{10301}
\validationRule{10302}
\validationRule{10303}
\validationRule{10304}
\validationRule{10305}
\validationRule{10306}
\validationRule{10307}
\validationRule{10308}
\validationRule{10309}
\validationRule{10310}
\validationRule{10311}
\validationRule{10312}
\validationRule{10313}

\end{sbmlenum} \subsubsection*{General rules for \token{annotation} elements} \begin{sbmlenum}

\validationRule{10401}
\validationRule{10402}
\validationRule{10404}

\end{sbmlenum} \subsubsection*{General rules for units} \begin{sbmlenum}

\consistencyRule{10501}
\consistencyRule{10503}
\consistencyRule{10511}
\consistencyRule{10512}
\consistencyRule{10513}
\consistencyRule{10514}
\consistencyRule{10521}
\consistencyRule{10522}
\consistencyRule{10523}
\consistencyRule{10524}
\consistencyRule{10531}
\consistencyRule{10532}
\consistencyRule{10533}
\consistencyRule{10534}
\consistencyRule{10541}
\consistencyRule{10542}
\consistencyRule{10551}
\consistencyRule{10561}
\consistencyRule{10562}
\consistencyRule{10563}
\consistencyRule{10564}
\consistencyRule{10565}

\end{sbmlenum} \subsubsection*{General rules for model definitions} \begin{sbmlenum}

\validationRule{10601}

\end{sbmlenum} \subsubsection*{General rules for SBO usage} \begin{sbmlenum}

\consistencyRule{10701}
\consistencyRule{10702}
\consistencyRule{10703}
\consistencyRule{10704}
\consistencyRule{10705}
\consistencyRule{10706}
\consistencyRule{10707}
\consistencyRule{10708}
\consistencyRule{10709}
\consistencyRule{10710}
\consistencyRule{10711}
\consistencyRule{10712}
\consistencyRule{10713}
\consistencyRule{10716}
\consistencyRule{10717}
\consistencyRule{10718}

\consistencyRuleVerTwo{10719}

\end{sbmlenum} \subsubsection*{General rules for \token{notes} elements} \begin{sbmlenum}

\validationRule{10801}
\validationRule{10802}
\validationRule{10803}
\validationRule{10805}

\end{sbmlenum} \subsubsection*{Rules for the \token{<sbml>} container element} \begin{sbmlenum}

\validationRule{20101}
\validationRule{20102}
\validationRule{20103}
\validationRule{20104}
\validationRule{20105}
\validationRule{20106}
\validationRule{20107}
\validationRule{20108}

\end{sbmlenum} \subsubsection*{Rules for \class{Model} components} \begin{sbmlenum}

\validationRule{20201}
\validationRule{20203}
\validationRule{20204}
\validationRule{20205}
\validationRule{20206}
\validationRule{20207}
\validationRule{20208}
\validationRule{20209}
\validationRule{20210}
\validationRule{20211}
\validationRule{20212}
\validationRule{20213}
\validationRule{20214}
\validationRule{20215}
\validationRule{20216}
\modelingRule{20217}
\modelingRule{20218}
\modelingRule{20219}
\modelingRule{20220}
\modelingRule{20221}
\validationRule{20222}
\validationRule{20223}
\validationRule{20224}
\validationRule{20225}
\validationRule{20226}
\validationRule{20227}
\validationRule{20228}
\validationRule{20229}
\validationRule{20230}
\validationRule{20231}
\validationRule{20232}
\modelingRule{20233}

\end{sbmlenum} \subsubsection*{Rules for \class{FunctionDefinition} components} \begin{sbmlenum}

\validationRule{20301}
\validationRule{20303}
\validationRule{20304}
\validationRule{20305}
\validationRule{20306}
\validationRule{20307}

\end{sbmlenum} \subsubsection*{Rules for \class{Unit} and \class{UnitDefinition} components} \begin{sbmlenum}

\validationRule{20401}
\validationRule{20410}
\validationRule{20413}
\validationRule{20414}
\validationRule{20415}
\validationRule{20416}
\validationRule{20417}
\validationRule{20418}
\validationRule{20419}
\validationRule{20420}
\validationRule{20421}

\end{sbmlenum} \subsubsection*{Rules for \class{Compartment} components} \begin{sbmlenum}

\modelingRule{20507}
\modelingRule{20508}
\modelingRule{20509}
\modelingRule{20511}
\modelingRule{20512}
\modelingRule{20513}
\validationRule{20514}
\validationRule{20515}
\validationRule{20516}
\validationRule{20517}
\modelingRule{20518}

\end{sbmlenum} \subsubsection*{Rules for \class{Species} components} \begin{sbmlenum}

\validationRule{20601}
\modelingRule{20608}
\validationRule{20609}
\validationRule{20610}
\validationRule{20611}
\validationRule{20614}
\modelingRule{20616}
\validationRule{20617}
\validationRule{20618}
\validationRule{20619}
\validationRule{20620}
\validationRule{20621}
\validationRule{20622}
\validationRule{20623}

\end{sbmlenum} \subsubsection*{Rules for \class{Parameter} components} \begin{sbmlenum}

\validationRule{20701}
\modelingRule{20702}
\validationRule{20703}
\validationRule{20704}
\validationRule{20705}
\validationRule{20706}

\end{sbmlenum} \subsubsection*{Rules for \class{InitialAssignment} components} \begin{sbmlenum}

\validationRule{20801}
\validationRule{20802}
\validationRule{20803}
\validationRule{20804}
\validationRule{20805}

\end{sbmlenum} \subsubsection*{Rules for \class{AssignmentRule}, \class{RateRule} and \class{AlgebraicRule} components} \begin{sbmlenum}

\validationRule{20901}
\validationRule{20902}
\validationRule{20903}
\validationRule{20904}
\validationRule{20906}
\validationRule{20907}
\validationRule{20908}
\validationRule{20909}
\validationRule{20910}

\validationRuleVerTwo{20912}

\end{sbmlenum} \subsubsection*{Rules for \class{Constraint} components} \begin{sbmlenum}

\validationRule{21001}
\validationRule{21004}
\validationRule{21005}
\validationRule{21007}
\validationRule{21008}
\validationRule{21009}

\end{sbmlenum} \subsubsection*{Rules for \class{Reaction} components} \begin{sbmlenum}

\validationRule{21101}
\validationRule{21103}
\validationRule{21104}
\validationRule{21105}
\validationRule{21106}
\validationRule{21107}
\validationRule{21108}
\validationRule{21109}
\validationRule{21110}
\validationRule{21150}
\validationRule{21151}

\end{sbmlenum} \subsubsection*{Rules for \class{SpeciesReference} and \class{ModifierSpeciesReference} components} \begin{sbmlenum}

\validationRule{21111}
\validationRule{21114}
\validationRule{21115}
\validationRule{21116}
\validationRule{21117}

\end{sbmlenum} \subsubsection*{Rules for \class{KineticLaw} components} \begin{sbmlenum}

\validationRule{21121}
\validationRule{21123}
\validationRule{21127}
\validationRule{21128}
\validationRule{21129}
\validationRule{21130}
\validationRule{21132}

\end{sbmlenum} \subsubsection*{Rules for \class{LocalParameter} components} \begin{sbmlenum}

\validationRule{21171}
\validationRule{21172}

\validationRuleVerTwo{21173}
\modelingRule{21174}

\end{sbmlenum} \subsubsection*{Rules for \class{Event} components} \begin{sbmlenum}

\validationRule{21201}
\validationRule{21202}
\validationRule{21203}
\validationRule{21208}
\validationRule{21209}
\validationRule{21210}
\validationRule{21221}
\validationRule{21222}
\validationRule{21223}
\validationRule{21224}
\validationRule{21225}
\validationRule{21226}
\validationRule{21227}
\validationRule{21228}
\validationRule{21229}
\validationRule{21230}
\validationRule{21231}
\validationRule{21232}

\end{sbmlenum} \subsubsection*{Rules for \class{EventAssignment} components} \begin{sbmlenum}

\validationRule{21211}
\validationRule{21212}
\validationRule{21213}
\validationRule{21214}

\end{sbmlenum}
