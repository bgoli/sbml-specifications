% To to:
% - mention SBML icons

\documentclass{sbmlfaq}

\latexhtml{
  \newcommand{\yes}{\raisebox{1pt}{\rule{3.5pt}{3.5pt}}}
}{
  \newcommand{\yes}{\htmladdimg{sbml-faq-green-dot.gif}}
}

\begin{document}

\title{SBML Frequently Asked Questions}

\author{Andrew Finney, Michael Hucka}

\authoremail{\{afinney,mhucka\}@caltech.edu}

\address{ERATO Kitano Symbiotic Systems Project\\
  Control and Dynamical Systems, MC 107-81\\
  California Institute of Technology, Pasadena, CA 91125, USA\\[3pt]
  \url{http://www.sbml.org/}}

\acknowledge{Principal Investigators: John Doyle and Hiroaki Kitano}

% This handling of the abstract is a total hack, but I don't have time
% to modify cekmanual to do it the right way. 2003-08-29 <mhucka@caltech.edu>
\date{{\normalsize$Revision$}\\[5pt]\today{}\\
\latexhtml{\vspace*{120pt}}{\vspace*{1pt}}
\begin{minipage}{5.75in}\normalsize
  This Frequently Asked Questions (FAQ) document answers questions about
  the Systems Biology Markup Language (SBML).  It is a non-normative
  document that does not \emph{define} any aspect of SBML; rather, it is
  intended to provide additional information about the language in an
  easily accessible and readable form.  Only the SBML specifications define
  SBML.  (See Section~\ref{sec:docs} for information on where to find the
  specification documents.)
  \\[1em]
  The latest version of this FAQ is available in different
  formats at the following online locations:\\[7pt]
  \begin{tabular}{ll}
    HTML: & \url{http://www.sbml.org/faq/sbml-faq.htm}\\
    PDF: & \url{http://www.sbml.org/faq/sbml-faq.pdf}\\
    PostScript: & \url{http://www.sbml.org/faq/sbml-faq.ps} 
  \end{tabular}
  \\[1em]
  If the question you have is not covered here, please consider submitting
  it for inclusion into a future copy of this FAQ.  (See
  Question~\ref{sec:not-answered} for information about how to do this.)
  \clearpage
\end{minipage}
}

\small
\maketitlepage
\normalsize


\section{SBML Introduction and Background}
\label{sec:intro}

\subsection{What is SBML?}

The Systems Biology Markup Language (SBML) is a machine-readable format for
describing qualitative and quantitative models of biochemical networks.  It
can also be used to express the interactions of biochemical networks with
other phenomena.  By a ``biochemical network'', we mean a system consisting
of biochemical entities linked by chemical reactions that alter, transport
and/or transform the entities.

The primary encoding of SBML is \href{http://www.w3.org/XML/}{XML}, a
popular text-based language for expressing structured data in a generic
fashion.  As a result, software developers can quickly write tools to
manipulate SBML by reusing existing XML software tools.


\subsection{What is the purpose of SBML?}

SBML is designed to enable the exchange of biochemical network models
between different software packages.  The aim is to (1) enable the enable
the exchange of models between software tools with little or no human
intervention, thus allowing the tools to be properly integrated; and (2)
enable these models to be published in electronic form alongside, for
example, peer-reviewed journal articles.  The emphasis in SBML is on
supporting quantitative models.


\subsection{What can be represented in SBML?}

An SBML model consists of a set of chemical entities linked by reactions
that can transform one entity into another or transport entities between
compartments.  A \emph{compartment} in SBML is a location having a defined
size or extent (which may be in terms of volume, area, or length).  Every
chemical species in an SBML model must be located in a compartment.

SBML can represent not only biochemical networks, but also quantitative
models of interaction between these networks and other phenomena.  SBML can
also describe discrete events that are triggered by state changes in the
modeled system.  The scope of SBML is constantly evolving through a
community-led development.

\subsection{Is SBML a database schema?}

Not specifically.  There is no reason why SBML models could not be stored
in a database, nor is there any reason why you could not use SBML as a
schema.  However, this was not the motivation for creating SBML.  An SBML
model is meant to encode a consistent view of knowledge of a biological
system.  SBML is not meant to encode a large set of potentially conflicting
knowledge about such a system.

\subsection{Who developed SBML?}

SBML originated out of a workshop on software platforms for systems biology
held in the year 2000 with funding by the Japan Science and Technology
Corporation (JST).  The original authors were Michael Hucka, Andrew Finney,
Herbert Sauro and Hamid Bolouri, but SBML is now very much a community
effort.  Please see Section~\ref{sec:history} for more details about the
history of SBML.  See Section~\ref{sec:organization} about how you can
participate in SBML's evolution.

\subsection{Where is SBML defined?}

The Systems Biology Markup Language is formally defined in specification
documents (see Question~\ref{sec:spec-docs}).

\subsection{Where is the SBML web site?}

The home website for SBML is \url{http://www.sbml.org/}.


\section{SBML Support}
\label{sec:sbml-support}

\subsection{Which applications support SBML?}

The matrix in Table~\ref{tab:apps} lists the software tools known to
support SBML, along with information about which level of SBML they
support.  The names of the packages are clickable URLs pointing to more
information about them.  (If you know of other SBML-compatible software not
listed here, please inform the editors of this FAQ.)

\newcommand{\indev}{\multicolumn{2}{c}{(in development)}}

\begin{table}[htb]
  \centering
  \caption{Table of applications known to support SBML.}
  \label{tab:apps}
  \vspace*{1pt}
  \begin{tabular}{l!{\hspace{10pt}}c!{\hspace{10pt}}c!{\hspace{10pt}}c!{\hspace{10pt}}c}
    \toprule
                        & \multicolumn{2}{c}{\textbf{SBML Level 1}} & \multicolumn{2}{c}{\textbf{SBML Level 2}} \\
    \textbf{Application} & \textbf{Read} & \textbf{Write} & \textbf{Read} & \textbf{Write}\\
    \midrule
    \href{http://www.basis.ncl.ac.uk/technology.html}{BASIS} & & \yes\\
    \href{http://www.cis.upenn.edu/biocomp}{BioCharon} & & & \yes \\
    \href{http://bio.bbn.com/biospice/biosketchpad/index.html}{Bio Sketch Pad} & & & & \yes\\
    \href{http://biocomp.ece.utk.edu/}{BioSpreadsheet} & & & \yes & \yes\\
    \href{http://www.biouml.org/}{BioUML} & & & \yes & \yes\\
    \href{mailto:schwacke@musc.edu}{BSTLab} & \yes & \yes & &\\
    \href{http://kurata21.bse.kyutech.ac.jp/cadlive/}{CADLIVE} & & & & \\
    \href{http://sbserv.symbio.jst.go.jp/002/001.html}{CellDesigner} & \yes & \yes & & \\
    \href{http://www-aig.jpl.nasa.gov/public/mls/cellerator/}{Cellerator} & & \yes \\
    \href{http://www.bii.a-star.edu.sg/sbg/cellware}{Cellware} & & & \indev\\
    \href{http://www.cytoscape.org/}{Cytoscape} & \yes  \\
    \href{http://biosim.genebee.msu.su/dbsdownload_en.html/}{DBsolve} & & & \indev \\
    \href{http://ecell.sourceforge.net/}{E-CELL} \\
    \href{http://biocomp.ece.utk.edu/}{ESS} & & & \yes & \yes\\
    \href{http://www.gepasi.org/}{Gepasi} & \yes & \yes \\
    \href{http://www.sys-bio.org/}{Jarnac} & \yes & \yes \\
    \href{http://www.sys-bio.org/}{JDesigner} & \yes & \yes \\
    \href{http://gnida.cs.vt.edu/~cellcyclepse/}{JigCell} & & & \yes & \yes\\
    \href{http://nsr.bioeng.washington.edu/Software/JSIM/}{JSIM} & \yes\\
    \href{http://jjj.biochem.sun.ac.za/index.html}{JWS} & \yes\\
    \href{http://biodynamics.indiana.edu/cyber_cell/}{Karyote}\\
    \href{http://www.sf.net/projects/sbml}{\textsc{libSBML}} & \yes & \yes & \yes & \yes\\
    \href{http://www.sf.net/projects/sbml}{MathSBML} & \yes & \yes\\
    \href{http://arep.med.harvard.edu/moma/}{MOMA} & & & & \yes\\ 
    \href{http://monod.molsci.org/}{Monod} & & & & \yes\\ 
    \href{http://strc.herts.ac.uk/bio/maria/NetBuilder/}{NetBuilder} & & \yes\\
    \href{http://jubilantbiosys.com/pd.htm}{PathArt} & & \yes\\
    \href{http://simpath.lionbioscience.com:8080/documentation/pathscout11}{PathScout} & & \yes\\
    \href{http://www.cds.caltech.edu/~hsauro/sbml.htm}{SBML DLL Library} & \yes & \yes\\
    \href{http://www.sbw-sbml.org}{SBW} & \yes & \yes\\
    \href{http://www.ucl.ac.uk/oncology/MicroCore/microcore.htm}{SCIPath} & \yes & \yes & \yes & \yes\\
    \href{http://www.sigpath.org}{SigPath} & & \yes\\
    \href{http://bioinformatics.nyu.edu/Projects/Simpathica/}{Simpathica} & \yes & \yes\\
    \href{http://info.anat.cam.ac.uk/groups/comp-cell/StochSim.html}{StochSim} & & \yes\\
    \href{http://www.sysbio.pl/stocks/}{STOCKS}\\
    \href{http://www.teranode.com}{Teranode} & & & & \\
    \href{http://www.sourceforge.net/projects/trelis}{Trelis} & \yes & \yes & & \\
    \href{http://www.nrcam.uchc.edu/vcell_development/vcell_dev.html}{Virtual Cell} & \yes & \yes\\
    \href{http://www.sys-bio.org/}{WinSCAMP (beta)} & \yes & \yes\\
    \bottomrule
  \end{tabular}
\end{table}


\subsection{Are software libraries available for programming with SBML?}
\label{sec:libraries}

The matrix in Table~\ref{tab:libs} lists software libraries known to
support SBML.  (If you know of others not listed here, please inform the
editors of this FAQ.)

\begin{table}[tbh]
  \centering
  \caption{Table of software libraries for SBML.}
  \label{tab:libs}
  \vspace*{2pt}
  \begin{tabular}{ll!{\hspace{10pt}}c!{\hspace{10pt}}c!{\hspace{10pt}}c!{\hspace{10pt}}c}
    \toprule
                       &         & \multicolumn{2}{c}{\textbf{SBML Level 1}} & \multicolumn{2}{c}{\textbf{SBML Level 2}} \\
    \textbf{Library} & \textbf{Languages}    & \textbf{Read} & \textbf{Write} & \textbf{Read} & \textbf{Write}\\
    \midrule
    \textsc{libsbml}        & C/C++/MATLAB     & \yes      & \yes      & \yes  & \yes\\
    MathSBML            & Mathematica       & \yes      & \yes\\
    SBML Windows DLL        & (Windows DLL)     & \yes      & \yes\\
    JigCell's \texttt{sbml.jar} & Java          &           &       & \yes  & \yes\\
    \bottomrule
  \end{tabular}
\end{table}


% 2003-06-09 <mhucka@caltech.edu>
% It is probably not appropriate to include this item.  We probably
% shouldn't make claims about other people's plans.
%
%\subsection{What groups plan to add support for SBML in the future?}
%Charon
%Copasi
%ProMote/DIVA

\subsection{Are there large groups using SBML?}

The following large consortia are known to us to be using SBML as their
standard model definition language.
\begin{itemize}\setlength{\parskip}{-1ex}
\item \href{https://community.biospice.org/}{DARPA BioSPICE}
\item International E. coli Alliance (IECA)
\end{itemize}


\subsection{Where can I find examples of SBML models?}

The specification documents for SBML, available from the project website
(\url{http://www.sbml.org/}), includes numerous simple examples.  The web
site also hosts a repository of SBML models drawn from a number of
published articles.  Finally, the site contains a link to a large test
suite containing thousands of model files in SBML Level~1 and Level~2
format.  The test suite is also available directly for downloading from the
SBML project area on SourceForge.net, at
\url{http://sourceforge.net/projects/sbml}.


\section{SBML Levels}
\label{sec:sbml-levels}

\subsection{What are SBML ``Levels''?}

SBML is being developed in a series of \emph{levels}, where each level adds
new features and fixes problems with the previous level.  The
lowest-numbered levels provide fundamental features that are common to all
biochemical network models.  Higher-numbered levels add more features that
are specific to particular classes of tools.  Any level can be used as a
standard for interchanging models.

\subsection{What is the current SBML Level?}

SBML Level~2 Version~1 was finalized in June 2003.  All new development is
oriented towards Level~3.


\subsection{What are the differences between Levels 1 and 2?}

The changes in SBML Level~2 include: replacing SBML Level~1's text-string
based format for mathematical expressions with
\href{http://www.w3.org/TR/2003/WD-MathML2-20030411/}{MathML} (a W3C
standard), introducing support for metadata using the same metadata scheme
as \href{http://www.cellml.org}{CellML}, introducing support for named
function definitions, introducing explicit modifier species such as
catalysts in reactions, and introducing new constructs for discrete events
and time delays.  There are several other small changes introduced in
Level~2.  The complete list of changes is documented in the SBML Level~2
specification (see Question~\ref{sec:spec-docs}).


\subsection{Why is Level~1 still being kept around if Level~2 has been defined?}
\label{sec:why-keep-level-1}

There exist tools that either were developed before the creation of SBML
Level~2 or for which Level~1 is more appropriate.  Thus, SBML Level~1
continues to have relevance even with the existence of Level~2.  

Note that since all Level~1 models can be translated to SBML Level~2, tools
that read SBML Level~2 can be made to support Level~1 reasonably easily.
Moreover, the availability of \textsc{libsbml} makes it much easier for
application developers to support different SBML levels in software
applications.  Among other features, \textsc{libsbml} has a built-in
Level~1 to Level~2 translation facility.  (See
Question~\ref{sec:libraries}.)


\subsection{What is the point of having a Level~1 Version~2?  Why not
  forget about it now that Level~2 is out?}

First, please refer to the previous question about why it is important to
have both Level~1 and Level~2 coexist.  As to the question of why bother
with a Version~2 definition, there were many reasons why it became
necessary to introduce a Version~2 of Level~1.  Here is a sample of the
reasons:
\begin{itemize}
  
\item Some things needed to be clarified, like the fact that stoichiometric
  constants were supposed to be \emph{positive} integers but the original
  Level~1 Version~1 specification never mentioned this.
  
\item There were some inconsistencies in the original specification, such
  as whether the annotation attribute on SBase was supposd to be spelled
  \texttt{annotation} or \texttt{annotations}.
  
\item People kept requesting the ability to make more things optional in
  models, such as compartments.
  
\item People repeatedly complained about certain issues such as the
  spelling of ``species'' vs ``specie''.

\end{itemize}

Level~1 is meant to coexist with Level~2, therefore it ought to be as good
as we can make it because people will (hopefully) be using it.  If people
complain about problems, and we have the ability to fix them, and the fixes
are basically isolated from people's code in parser libraries such as Ben
Bornstein's \textsc{libsbml}, why not make the fixes?



\subsection{What features are anticipated in Level 3?}

People interested in SBML have organized themselves into a number of
working groups focused on different topics.  The topics of these working
groups give an indication of the features anticipated for SBML Level~3
(see Question~\ref{sec:workinggroups} for a list of working groups).


\section{Specifications and Documentation}
\label{sec:docs}

\subsection{Are there publications about SBML?}

There are currently two:

\begin{itemize}
  
\item \emph{The Systems Biology Markup Language (SBML): A
    medium for representation and exchange of biochemical network
    models}
    
    Hucka, M., Finney, A., Sauro, H.~M., Bolouri, H., Doyle, J.~C., Kitano,
    H., Arkin, A.~P., Bornstein, B.~J., Bray, D., Cornish-Bowden, A. ,
    Cuellar, A.~A., Dronov, S., Gilles, E.~D., Ginkel, M., Gor, V.,
    Goryanin, I.~I., Hedley, W.~J., Hodgman, T.~C., Hofmeyr, J.-H., Hunter,
    P.~J., Juty, N.~S., Kasberger, J.~L., Kremling, A., Kummer, U., Le
    Nov\`{e}re, N., Loew, L.~M., Lucio, D., Mendes, P., Minch, E.,
    Mjolsness, E.~D., Nakayama, Y., Nelson, M.~R., Nielsen, P.~F.,
    Sakurada, T., Schaff, J.~C., Shapiro, B.~E., Shimizu, T.~S., Spence,
    H.~D., Stelling, J., Takahashi, K., Tomita, M., Wagner, J., Wang, J.,
    \href{http://bioinformatics.oupjournals.org/cgi/reprint/19/4/524?ijkey=BzZTZ.dDZEXp0U&keytype=ref&siteid=bioinfo}{\emph{Bioinformatics},
      2003, vol. 19, no. 4, pp. 524--531}.

\item \emph{Systems Biology Markup Language: Level 2 and Beyond}

    Finney, A., and Hucka, M.,
    \href{http://www.biochemsoctrans.org/}{\emph{Biochemical Society
        Transactions}}, in press.

\end{itemize}



\subsection{Where is SBML defined?}
\label{sec:spec-docs}
The following are the specification documents for the different levels of
SBML:

\begin{itemize}
  
\item \href{http://www.sbw-sbml.org/sbml/docs/index.html}{SBML Level 2}.
  This is the latest edition of SBML.
  
\item \href{http://www.sbw-sbml.org/sbml/docs/index.html}{SBML Level 1
    Version 2}.  This is the latest version of SBML Level~1 and supercedes
  the original SBML Level~1 Version~1 definition.  As explained elsewhere
  (Question~\ref{sec:why-keep-level-1}), Level~2 and Level~1 are intended to
  coexist---the availability of Level~2 does not render Level~1 obsolete.
  
\item \href{http://www.sbw-sbml.org/sbml/docs/index.html}{SBML Level 1
    Version 1}.  Please note that SBML Level 1 Version~1 is now deprecated
  in favor of Version~2.  SBML Level~1 Version~1 should no longer be used
  for any new development.  Moreover, we encourage developers to use SBML
  Level~2 in their software.  See Question~\ref{sec:which-level-to-use}.

\end{itemize}

SBML Level 2 makes use of other standards and specifications.  In
particular, the following are important references:

\begin{itemize}

\item \href{http://www.w3.org/TR/2003/WD-MathML2-20030411/}{The MathML 2.0 specification}

\item \href{http://www.cellml.org/public/metadata/}{The CellML Metadata specification}

\end{itemize}


\section{The Design of SBML}

\subsection{What is the basic idea behind the SBML units system?}

The idea is that the units associated with every math entity in a model
should be precisely defined, while at the same time allowing for reasonable
default unit definitions.  The set of math entities important in this
regard includes variables, parameters and the result of equations.

The motivation for having a units system in SBML is threefold: it allows
the semantics of math entities to be defined precisely, it allows a
consistent method for handling multi-compartmental models, and in the
longer term, it will allow for consistency-checking and unit conversions in
models that are composed from submodels.


\subsection{Are the units used in a model not well-defined unless the model contains unit attribute values?}

In a model that doesn't define values for unit attributes, only the units of
parameters (and their rules) are undefined.  The units of species,
compartments and kinetic laws are well-defined via built-in defaults.


\subsection{But isn't allowing default units a bit of cop-out?}

The specification states that all math entities apart from parameters have
precisely defined units.  Unfortunately, the majority of software tools
today offer little or no support for units.  We could not have
interoperability between tools if we imposed a mandatory, explicit units
system.


\subsection{Not having a precise definition of parameter units is a big hole, isn't it?}

In Level 1 and Level 2, the only practical use for these would be for documentation purposes.
We don't and can't expect software to determine and check the effective units of parameters by analyzing
equations.  In addition, many tools don't require units on parameters, so we allow parameter
units to be optional.

We anticipate that some systems supporting model composition in Level 3 will check parameter units.
However, it's still an
open question to many people whether tools should impose constraints
on parameter units and/or perform conversions between math entities
as part of the composition process.


\subsection{What are the `built-in' units exactly?}

There are built-in units for substance, length, area, volume and time.  These units
are, by default, used to form the units of various math entities in a SBML model.
For example, by default, a species symbol in a kinetic law equation has substance/volume 
units (assuming that the species' compartment has 3 spatial dimensions).

These built-in units are in turn defaulted to specific units.  For example,
\emph{substance} defaults to units of moles.  An SBML model can explicitly
set the underlying units of a built-in unit; for instance, it is possible
to redefine \emph{substance} to be millimole.


\subsection{What are the benefits of the `built-in' units?}

The great benefit of having built-in units is that it allows
a model to redefine the underlying units of a whole model
precisely without having to assign units to every math entity explicitly.

The SBML specification ensures that the built-in units operate in a consistent
and reasonable way across math entities.

%\subsection{Why are reaction rates in ``substance/time'' units instead of
%  ``substance/volume/time'' units?} 
%
%\label{sec:reaction-units}
%
%(In the explanation below, a symbol such as $A$ represents the substance of
%a species and $[A]$ represents the concentration of a species.)
%
%In both Level 1 and Level 2, the formula used to define the rate of a given
%reaction is defined to be substance/time (moles/second by default).  This
%is reasonable since reactions change species amount directly and only
%species concentration indirectly.  We are aware that many modelers use
%concentration/time or substance/volume/time (moles/liter/second by default)
%when defining rate of change formulae for species.  There are reasons for
%SBML to adopt substance/time for kinetic laws:
%\begin{enumerate}
%  
%\item Kinetic laws on reactions don't define the rate of change of a single
%  species.  In fact the rate of change of species is composed from the rate
%  laws of all reactions in which the species is either a reactant or
%  product.  The result is a formula that defines a rate of change of amount
%  for the species.
%  
%\item A reaction can have a transport component i.e. move species from one
%  compartment to another where each compartment can have a different
%  volume.
%
%\end{enumerate}
%
%Consider the situation where there are 3 species $A$, $B$ and $C$ all in
%separate compartments with volumes $V_a$, $V_b$, and $V_c$ respectively.
%We define a transporting reaction $A \rightarrow B + C$ with a rate law
%$k[A]$ .  The rates of change of amount are
%\[
%  \begin{array}{lll}
%    dA/dt & = & -k[A]\\
%    dB/dt & = & k[A]\\
%    dC/dt & = & k[A]
%  \end{array}
%\]
%
%and thus the rates of change of concentration are:
%\[
%  \begin{array}{lll}
%    d[A]/dt & = & -k[A]/V_a\\
%    d[B]/dt & = & k[A]/V_b\\
%    d[C]/dt & = & k[A]/V_c
%  \end{array}
%\]
%
%One immediate observation of this is if you don't care about volume and
%compartments: you just locate everything inside a single unit compartment
%and then $[A] = A$, thus returning the math to the conventional
%representation.
%
%Let's now consider an alternative definition of rate laws that may seem
%rational: the rate law defines the rate of change of concentration of the
%species in the reaction.  Thus we have:
%\[
%  \begin{array}{lll}
%    d[A]/dt & = & -k[A]\\
%    d[B]/dt & = & k[A]\\
%    d[C]/dt & = & k[A]
%  \end{array}
%\]
%
%Therefore, the rates of change of amount are:
%\[
%  \begin{array}{lll}
%    dA/dt & = & -k[A]V_a\\
%    dB/dt & = & k[A]V_b\\
%    dC/dt & = & k[A]V_c
%  \end{array}
%\]
%
%Hopefully you'd agree that this is incorrect---this suggests that you can
%increase the rate of increase of amount of $C$ simply by increasing the
%volume of $C$'s compartment.
%
\subsection{How should models without compartments be encoded?}
\label{sec:models-without-compartments}

The models should locate all species in a single compartment with unit volume.
The default units system of SBML will ensure that this unit volume
representation is exactly equivalent to a model dealing with concentrations,
including rate laws defined in substance/volume/time units.

\subsection{Why doesn't SBML Level~2 define a default compartment with unit volume?}
\label{sec:why-no-default-compartment}

There are several reasons:
\begin{enumerate}
  
\item A model that uses a single unit-volume compartment is making explicit
  an important underlying assumption about the model.  Leaving it implicit
  would be more prone to errors.
  
\item A default compartment would be a special case which all SBML parsing
  programs would have to handle specially.
  
\item We would have to invent a reserved name to refer to the default
  compartment.
  
\item It would only save effort in developing the SBML writing component of
  a software tool.  The writing component is the easy part; reading and
  interpreting is the harder part.

\end{enumerate}


\subsection{Why does SBML include ``low-level'' features such as rules in
  combination with biochemical concepts like reactions and species?} 

The aim of SBML is to enable the construction of quantitative models that
describe both the activity of biochemical networks and interaction of
biochemical networks and other phenomena.  SBML allows the declaration of
variables (non-constant parameters) and associated ODEs and DAEs to
describe these phenomena.  Examples of these phenomena include the
mechanical force generated by muscle cells and the electrical potential
across a synapse.

\subsection{Why is there a distinction between assignment and algebraic rules?
  Aren't they equivalent?}

Although it is typically easy to transform between assignment and algebraic
rules, we make the distinction in SBML because:
\begin{itemize}

\item Algebraic rules define the point in the model where there is a circular
  dependency between variables.  For instance, the equations $x = 2y$ and $y = x + 1$
  have a circular dependancy.  It is not possible to form such a dependancy in
  scalar rules (see the SBML Level~2 specification).  At least one of the example
  equations would have to be encoded as an algebraic rule in SBML.
  
\item Many tools are not capable of supporting algebraic rules (DAEs)
  
\item Those tools that do support make the distinction between assignment rules
  and algebraic rules.

\end{itemize}


\subsection{Why can't functions be recursive in Level 2?}

Functions definitions in SBML Level 2 are designed to allow them to be
substituted in place of the function call operator; that is, they are
deliberately defined so that software tools can treat them like macros
rather than functions.  This would not be possible if functions were
allowed to be recursive.


\subsection{What on earth are ``events''?}

``Events'' are discrete discontinuous events that can be triggered in
response to state transitions in a model.


\subsection{Is it possible to represent an entirely
  event-driven, deterministic model in SBML Level~2?} 

Yes, although we are not aware of any simulators that can support this kind
of model.


\subsection{What's the difference between the \textup{\attrib{boundaryCondition}}
  and \textup{\attrib{constant}} attributes on species in Level~2?}

Level 2 introduces the \attrib{constant} to the \class{Species} structure
in addition to the \attrib{boundaryCondition} from Level 1.  One might
expect these attributes to both define that the species doesn't vary during
simulation; however, there is a difference in their semantics.  The
\attrib{constant} attribute indicates that the species concentration
doesn't vary during simulation no matter what reactions or rules it occurs
in.  Such a constant species can't have an associated rule.  The
\attrib{boundaryCondition} attribute defines only that the species
concentration is not defined by the set of reactions.


\subsection{Why were \attrib{constant} attributes introduced in SBML Level 2?}

Given a model that doesn't contain algebraic rules it is possible to infer 
which components (species, compartment and parameters) are meant to be variables
by examining the set of scalar rules, rate rules and reactions.
However given a model
containing algebraic rules knowledge of which symbols are
variables and which are constants is required to solve the equations.
The occurence of a symbol in an algebraic rule doesn't imply that
the symbol is a variable.   


\subsection{Why isn't there an explicit definition of SBML in terms of an
  ODE equivalent form?} 

On one hand, we were worried that a focus on the ODE representation would
deter developers that employ other forms, for example stochastic discrete
event simulation, from supporting SBML.

On the other hand, we simply have not had time to work on this area.  We
would welcome volunteers to work on this.  There is an example translation of
a model into ODEs in the specification for Level 2.


\section{Implementing SBML support}

\subsection{Which level of SBML should I use in my software?}
\label{sec:which-level-to-use}

We recommend SBML Level 2, despite the fact that at the moment more tools
support Level~1, because Level~2 fixes known problems with Level~1 and
we anticipate that Level~2 will be forward-compatible with Level~3.


\subsection{Is it a good idea to use SBML as my software's native model format?}

Depending on the needs of your software, yes, this may be a good idea.
JDesigner, JigCell and CellDesigner are examples of software tools that use
SBML as their native formats.


\subsection{What software libraries are available to help me program
  support for SBML in my software?}  

See Question~\ref{sec:libraries}.


\subsection{The unit system seems to imply some implicit unit conversions may be required in various places when parsing a model.
Can you give an overview of what you expect a model parser to do?}

The first step is to establish what the units are of the various entities in your object model.
These units may be generic and thus can be derived from the SBML built-in units.

There are 3 places where unit conversion may have to occur depending on the units used for variables internal to a simulation:

\begin{itemize}

\item \emph{symbols in formulae}

Variables that are used in formulae may require a conversion from the object model units to the units associated with the SBML symbol
before the SBML formulae are applied to the variables.  

\item \emph{result of formulae}

The result of SBML formulae may require a conversion from SBML units associated with the formulae result to the units associated
with the simulation variables that are assigned the result of formulae.  Particular attention should be placed on the
results of kinetic laws which have substance/time units in SBML.

\item \emph{initial conditions}

The initial values of variables may require conversion from the SBML units associated with the symbol to the object model units of
the variable.

\end{itemize}

\subsection{My software cannot support all the features of SBML---what should I do?}

Don't Panic.  Few if any packages support all aspects of SBML.  Depending
on what you wish do with a model you can either ignore features that are
not relevant to your tool or report errors when certain features are used.
In most cases a simulator will simply report an error if it encounters a
feature that it is unable to support.  Ignoring quantitative aspects of an
SBML model when parsing it into an simulator or analysis tool is strongly
discouraged, because it will make it unlikely a user will be able to
reproduce results seen in the tool which generated the model.


\subsection{What do I do about the fact that SBML does not encode all the
  information that I need to encapsulate in a model?}

You should use \class{Annotation} elements.  These are described in some detail in the Level~1 and Level~2
specification documents.  \class{Annotation} elements can be enclosed within any SBML element and can contain
elements of any namespace. Elements that are not in the SBML namespace should either locally redefine the default namespace
or use namespace prefixes to clearly separate application specific data from different software packages.
Data stored in annotation elements should not contain data that could be or is encoded in SBML.  

\subsection{How should I structure annotations?}

The annotation data enclosed in a specific SBML element is
assumed by other applications to be directly associated with that specific element.
Therefore it is important to decompose and locate annotation data appropriately in an SBML document.
Avoid, for example, encoding all annotation data in a top level attribute.
The data associated
with, for example, an individual species should be encoded in the annotation element enclosed within
the SBML species element representing that species.

\subsection{How should I attach standard database identifiers, for example GO terms, to SBML elements?}

Database identifier annotations can be created using CellML metadata in
SBML Level 2; see the
\href{http://www.cellml.com/public/metadata/cellml_metadata_specification.html}{specification
  for CellML Metadata}, in particular Section~4.10, ``Biological Entity''.
SBML elements derived from \class{SBase} have a \attrib{metaid} attribute,
which should contain a value unique to the SBML document.  RDF elements can
use this value as a reference to the specific element.

Its possible to use a simpler form of database identifier annotation than that shown
in the CellML specification.  For example here's an SBML species annotated with a GO term:

\begin{example}
<species id="foo" metaid="x1"/>
...
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:cmeta="http://www.cellml.org/metadata/1.0#">
  <rdf:Description about="#x1">
    <cmeta:bio_entity>
         <cmeta:identifier rdf:parseType="Resource">
            <cmeta:identifier_scheme>GO Consortium</cmeta:identifier_scheme>
            <rdf:value>GO:0048038</rdf:value>
          </cmeta:identifier>   
    </cmeta:bio-entity>
  </rdf:Description>
</rdf:RDF> 
...
\end{example}

\subsection{What should I do when I encounter an incorrect SBML file or
  stream?} 

Whilst it is not expected that an application will detect all errors in an parsed SBML document it is
expected that a parser will not simply ignore or fudge discrepancies between the document and the relevant
SBML standard.  The parser should report the line number and a description of the error to the user
i.e. a parser should not assume that an incorrect SBML file is an extremely unusual event or that
the details of a parsing error are irrelevant to the user.

If you encounter consistent differences between the standard specification and documents that
claim to be compliant then please report this to the sbml-discuss mailing list. 

\subsection{There are several different ways in which I could encode my
  models in SBML. Which forms are more interoperable?}
\label{sec:bestpractice}
  
It is true that there are several ways in which to encode a given model in SBML, deciding which form to use in
various contexts is a big subject.  Although this section describes which SBML features are commonly used tools should
support as wide a set of features of SBML when reading SBML as possible.  Here is a rough guide:

\subsubsection{Identifiers}

Although \attrib{id} fields have restricted syntax do assume that tools could potentially display the contents
of this field to users even when \attrib{name} attributes are available.  This means that if you
capture names from a UI that this data is placed in both the \attrib{name} and \attrib{id} fields
(with the \attrib{id} field value perhaps slightly mangled).  Avoid using crude automatically generated values
in the \attrib{id} field.

\subsubsection{Stoichiometry}

Whilst it is possible to encode complex math expressions to specify stoichiometry it is best to restrict these
expressions to being just positive integer values.

\subsubsection{Species initial value}

A species initial value can be specified using \attrib{initialAmount} or \attrib{initialConcentration}.
The attribute most commonly used is \attrib{initialConcentration}.

\subsubsection{Compartment spatial dimensions}

Common practice is to allow the \attrib{spatialDimensions} attribute to default to 3.  In fact the majority of simulators
only support the value 3 for this attribute.

\subsubsection{Species References}

A reaction's product and reactant lists can contain more than one species reference structures referring to the same species.
This is not however good practice for interoperability. 

\subsubsection{Rules verses Reactions}

In all cases where possible a reaction structure is preferable to the equivalent rule structures even if this
means the use of reactions which have no reactants or products.

\subsubsection{Algebraic Rules verses Assignment Rules}

If it is possible to avoid using algebraic rules then do not use them.

\subsubsection{Discontinuities}

Avoid the use of discontinuous operators like \texttt{piecewise}.

\subsubsection{Delay}

Avoid the use of the built-in delay operator.

\subsubsection{Events}

Avoid the use of the events.

\subsubsection{Units}

Do not expect tools to interpret units.  Ensure your tool can parse models which use entirely default units.

\subsection{How much effort should I invest in preserving the SBML form
  when round-tripping models through my software?} 

The first priority should be to support as much of the SBML standard as possible both for reading and writing.
You should write using the most interoperable form as possible as described in Question~\ref{sec:bestpractice}.
To maximize interoperability beyond this requires
trying to include as much of an imported SBML model as possible when rewriting it in SBML.  This includes preserving
annotation data and avoiding mangling \attrib{id} and \attrib{name} fields.  The order of structures, other than rules,
and the white space between elements do not require preservation.

%\subsection{How do I interpret SBML for stochastic simulation purposes?} 
%
%Although SBML takes a differential equation approach to describing models
%it is possible to parse an SBML document into a stochastic modelling environment.
%The most common type of stochastic simulator in use are derivatives of the Gillespie
%non-deterministic discrete event algorithm.  This the type assumed in the section.
%Ideally the SBML parsing process is performed from a model with most if not all units defaulted.
%This requires the species amount in moles or species concentrations in moles per litre to
%be translated into number of molecules.  The parameters of simple mass action kinetics can be extracted
%from kinetic rate laws of reactions.

\section{Organization}
\label{sec:organization}

\subsection{What is the overall SBML development process?}

SBML development has been and continues to be motivated and directed by the
systems biology community.  The process is managed by the \emph{SBML
  Editors} (see next question), but they do so under the control of the
community.  The editors collect proposals for changes to SBML from the SBML
Working Groups and from other groups and individuals, and then seek to
establish a consensus in the community about how to proceed with the
proposals.  With this information, the editors assemble some of the
proposals into a draft specification for a new edition of SBML.  After this
draft has been reviewed by the community, it becomes a final specification
for the new edition of SBML.  (``Edition'' in this context can be either a
new SBML Level, or a new version of an existing level.)


\subsection{Who are the ``SBML Editors''?}

Currently, the editors are \href{mailto:afinney@cds.caltech.edu}{Andrew
  Finney} and \href{mailto:mhucka@caltech.edu}{Mike Hucka}


\subsection{What do SBML Editors do?}

The following are the roles of the SBML editors:

\begin{itemize}\setlength{\parskip}{0ex}

\item assemble proposals into SBML Level specifications
\item organize SBML forum meetings
\item maintain the \url{http://www.sbml.org} website
\item publicize and document the SBML standard
\item support developers who wish to work with SBML
\item support the SBML Working Groups in developing proposals

\end{itemize}

\subsection{What are ``SBML Forum'' Meetings?}
\label{sec:forums}

These are biannual face-to-face meetings organized by the SBML editors.
The formal title of the meetings is the \emph{Workshops on Software
  Platforms for Systems Biology}.  These are held in early summer and early
winter.  The winter meeting is normally held in conjunction with the
International Conference for Systems Biology (ICSB).  SBML Forum meetings
allow for significant discussion of new SBML proposals and interoperability
issues.  An archive of information on these meetings is available at
\url{http://www.sbw-sbml.org/workshops/index.html}

\subsection{What are the ``Workshops on Software Platforms for Systems Biology''?}

They are the same as the SBML forum meetings (see Question~\ref{sec:forums}).


\subsection{SBML doesn't encode all the information that is
  being used in systems biology modeling.  What is being done to address
  this problem?}
\label{sec:workinggroups}

The SBML community has established \emph{Working Groups} to develop
proposals for extending SBML in future levels.  The current Working Groups
are:

\begin{description}
\item \href{http://www.mpi-magdeburg.mpg.de/zlocal/martins/sbml-comp/}
{\emph{The model composition group}}
  Investigating SBML extensions to support the composition of models from submodels.

\item \href{http://caboy.uchc.edu/wagner/Science/VirtualCell/SBML-DWG/Default.htm}
{\emph{The diagrams/graphical layout group}}
  Investigating SBML extensions to support the recording of the graphical network
  diagrams of a model created by many contemporary network-oriented
  modeling tools.

\item \href{http://www.sbw-sbml.org/sbml-discuss/archive/msg00166.html}
{\emph{The arrays group}}
  Investigating the extension of SBML data structures to permit arrays of items
  (e.g., species, compartments) to be grouped and manipulated \emph{en
    masse}.

\item \href{http://www.sbw-sbml.org/sbml-discuss/archive/msg00174.html}
{\emph{The complexes/multistate species group}}
  Investigating SBML extensions to enable the compact representation of species
  with multiple possible ``states'' (e.g., due to phosphorylation).

\item \href{http://www.sbw-sbml.org/sbml-discuss/archive/msg00423.html}
{\emph{The parameter sets group}}
  Investigating the creation of a separate standard for defining alternative initial
  values for variables and parameters in a model.
  
\item \href{http://www.sbw-sbml.org/sbml-discuss/archive/msg00235.html}
{\emph{The alternative reactions group}}
  Investigating the extension of SBML reactions to
  support more directly the expression of stochastic and other formalism for
  describing reactions.
  
\item \href{http://www.sbw-sbml.org/sbml-discuss/archive/msg00466.html}
  {\emph{The hybrid models group}} Investigating how SBML should support
  multiple formalisms, such as continuous and discrete deterministic
  within the same model.
  
\item \href{http://www.sbw-sbml.org/sbml-discuss/archive/msg00510.html}
{\emph{The controlled vocabularies group}}
Investigating the extension of SBML to 
  indicate that a model, its reactions, or other components of a model
  are meant to be interpreted in certain ways (e.g., to be simulated in a
  stochastic framework).

\item \emph{The dynamic structures group}
  Investigating the extension of SBML to enable model structures to vary
  during simulation.  One aspect of aspect of this is allowing rules and
  reactions to have effects that depend on the state of the model system.
  
\item \emph{The spatial features group}
  Investigating the extension of SBML to describe the 2-D and 3-D spatial
  characteristics of models, the geometry of compartments, the diffusion
  properties of species, and the specification of different species
  concentrations across different regions of a cell.

%\item \emph{The constraints group}

\end{description}

\subsection{How do members of the working groups communicate?}

Discussions within the group should, at least initially,
   take place on sbml-discuss, rather than on a separate
   mailing list.  This will avoid the need for working group
   organizer(s) to create new archived mailing lists right
   from the start, and will also allow other people to see
   some of the discussions even if they do not want to be
   involved to the level of officially being in the working
   group.  If the traffic for a particular group becomes too
   much for other people on sbml-discuss, that working group
   may create its own archived mailing list at that time.

\subsection{I have identified a feature or features that are missing from
  SBML.  How to do I start a working group to address this issue?}  

Any interested person or group can send mail to
   sbml-discuss to propose forming a working group.  The
   announcement should include the following information:

\begin{itemize}
   \item A short statement of the purpose or goal of the effort
     (typically, an extension to SBML).

   \item The initial contact person for the group.  That person
     may or may not be the eventual chairperson.

   \item The list of the initial members of the group.

   \item A description of the expected form of the outcome from
     the effort.  This will typically be a document
     describing some proposed changes to SBML.

   \item An estimate of how long the group expects to stay in
     existence (meaning, how long it will give itself to
     accomplish its goals before reevaluating its status and
     expectations.)
\end{itemize}

Being a member of a working group implies a desire and
   willingness to work on actual software underlying the
   focus of the group's effort.  Proposals for SBML changes need
   to be accompanied by examples of one or more software
   implementations of the proposed changes.  To make this
   possible, the implementations should add proposed XML
   extensions within the SBML \texttt{annotation} element.  This
   will allow tools to exchange models with the proposed
   extensions in a semi-organized fashion.  Once the
   proposed changes have been debugged to the satisfaction
   of the group(s) using them, the proposal can be
   introduced to the SBML community at large.  When
   accepted, the new extensions will be migrated out of the
   'annotation' element and made a part of SBML.


\subsection{What is the relationship between SBML and CellML?}

CellML is built around an approach of composing systems of equations
by linking together the variables in those equations; this is augmented
by features for declaring biochemical reactions explicitly, as well as
encapsulating arbitrary components into modules.  By contrast, SBML
provides constructs that are
more similar to the internal object models used in many simulation/analysis
packages specialized for biochemical networks.  This reflects its history
of having been developed in cooperation with software developers who write
these tools.  In practice, SBML appears to be better suited to the purpose
of enabling interoperability with existing simulation tools focused on the
biochemical reaction level.  These differences notwithstanding, the SBML and
CellML efforts share much
in common, and the development of SBML has benefited from discussions and
interactions with the developers of CellML.  (The CellML
team has been an active participant in the SBML development process.)  The editors view CellML and
SBML as somewhat different approaches being investigated as solutions to the
same general problems.  One of the aims of the
\href{http://www.mpi-magdeburg.mpg.de/zlocal/martins/sbml-comp/}
{model composition working group}
is to ensure that the two representations can be integrated with each other to create
a single standard in the future.  The result will be compositional compatibility
between CellML and SBML, such that models expressed in one language can be
used as components or submodels in the other.

\subsection{What is the relationship between SBML and BioPAX?}

\href{http://www.biopax.org/}{BioPax} is a consortium that is developing a
format for the exchange of pathway data between bioinformatics databases.
The aim is to ensure that large subsets of data represented in one format
can be converted into the other format.  The BioPAX standard is designed to
support a large set of biochemical entity types and types of relationships
between these types.  These types will be arranged into ontologies.  The
SBML editors have a good working relationship with the group doing the
majority of the work on this standard: Chris Sander's group at MSKCC.

\subsection{What is the relationship between SBML and I3C?}

\href{http://www.i3c.org/}{Interoperable Informatics Infrastructure
  Consortium (I3C)} is an organization which promotes the use of standards
in the life sciences research software.  The I3C has a
\href{http://www.i3c.org/wgr/psb/psb.asp}{pathways/systems biology working
  group}.  The SBML editors are co-chairs of this working group.

The I3C doesn't create standards; instead, it encourages their development
and then makes recommendations on standards to its members.  I3C has a
close relationship with OMG.


\subsection{Why isn't SBML being developed under the auspices of a
  standards body like the OMG?} 

We are attempting to have the SBML development process meet the
requirements of the community it serves.

The editors considered submitting SBML as a proposal to the
\href{http://www.omg.org/}{Object Management Group (OMG)} in response to a
request for proposals (RFP) for pathways representations.  However, the
SBML community decided at the 7th Forum meeting in May, 2003, that while it
would be useful to have the endorsement of a standards body like the OMG,
our time would be better spent working on standards development rather
conforming to all the standards requirements of the OMG process.  The
editors did not submit a response to the OMG RFP.  However, Scott Markel of
LION Bioscience and chair of the OMG LSR group, submitted an outline
proposal suggesting SBML and CellML as a basis for an OMG standard as a
response to this RFP.


\subsection{Which research groups are involved in SBML development?}

All the groups that have produced the software listed in Question~\ref{sec:sbml-support} are involved
to some extent in the development of SBML.

\section{History}
\label{sec:history}

\subsection{Who proposed the creation of SBML?}

Dr.\ Hamid Bolouri initially suggested it at the First Workshop on Software
Platforms for Systems Biology in April~2000.  The delegates there supported
the idea enthusiastically.

\subsection{Who were the original SBML editors?}

Michael Hucka, Herbert Sauro and Andrew Finney wrote the original SBML
proposal in the second half of the year 2000.

\subsection{What was the organizational context of the original editors?}

This work was initially performed in John Doyle's group by Michael Hucka,
Herbert Sauro, Andrew Finney and Hamid Bolouri in the Control and Dynamical
Systems Department (CDS) at the \href{http://www.caltech.edu}{California
  Institute of Technology (Caltech)}.  John Doyle and Hiroaki Kitano were
the joint Principle Investigators.  Hamid Bolouri managed the process until
May 2003.

\subsection{Where are they now?}

Hamid Bolouri is Professor of Computational Biology at the
\href{http://www.systemsbiology.org}{Institute of Technology}.  Herbert
Sauro is an Assistant Professor at the \href{http://www.kgi.edu}{Keck
  Graduate Institute}.  Mike Hucka remains in CDS and Caltech.  Andrew
Finney is a Senior Research Fellow at the
\href{http://strc.herts.ac.uk/}{Science and Technology Research Centre at
  the University of Hertfordshire}.  Mike and Andrew are now joint
chairs/editors of the SBML process.

\subsection{Who funded the initial editorial work?}

The initial development of SBML was funded by the
\href{http://www.jst.go.jp/EN/}{Japan Science And Technology Corporation}'s
\href{http://www.jst.go.jp/erato/}{\emph{Exploratory Research for Advanced
  Technology} program (JST ERATO)}.

\subsection{Who funded many of the SBML Forum meetings?}

UK's \href{http://www.bbsrc.ac.uk/}{Biotechnology and Biological Sciences
  Research Council}.

\section{Help}

\subsection{My question is not answered in this FAQ list. Who should I contact?}
\label{sec:not-answered}

You may contact any of the editors of this FAQ individually, or use the
SBML project email address,
\href{mailto:sbml-team@caltech.edu}{sbml-team@caltech.edu}.  The editors
of this FAQ are:

\begin{itemize}
\item \href{mailto:afinney@cds.caltech.edu}{Andrew Finney}
\item \href{mailto:mhucka@cds.caltech.edu}{Mike Hucka}
\end{itemize}


\end{document}
